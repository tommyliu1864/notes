15:50:51:306  INFO 84480 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 84480 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
15:50:51:315 DEBUG 84480 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
15:50:51:315  INFO 84480 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
15:50:53:716  INFO 84480 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f36be40e-8ba5-33a8-aea5-143028934ac2
15:50:54:385  INFO 84480 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
15:50:54:403  INFO 84480 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
15:50:54:404  INFO 84480 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
15:50:54:770  INFO 84480 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
15:50:54:770  INFO 84480 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3360 ms
15:50:55:802  INFO 84480 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
15:50:56:129  INFO 84480 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
15:50:56:300  WARN 84480 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'orderStatusListener' defined in file [F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes\com\hmall\trade\listener\OrderStatusListener.class]: Unsatisfied dependency expressed through constructor parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.hmall.api.client.PayClient' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
15:50:56:305  INFO 84480 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
15:50:56:322  INFO 84480 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
15:50:56:342 ERROR 84480 --- [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in com.hmall.trade.listener.OrderStatusListener required a bean of type 'com.hmall.api.client.PayClient' that could not be found.


Action:

Consider defining a bean of type 'com.hmall.api.client.PayClient' in your configuration.

15:52:08:345  INFO 69400 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 69400 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
15:52:08:347 DEBUG 69400 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
15:52:08:348  INFO 69400 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
15:52:09:528  INFO 69400 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ecace3d6-5c21-3c65-a621-02d0c307df14
15:52:09:900  INFO 69400 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
15:52:09:909  INFO 69400 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
15:52:09:909  INFO 69400 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
15:52:10:131  INFO 69400 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
15:52:10:132  INFO 69400 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1741 ms
15:52:10:954  INFO 69400 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
15:52:11:188  INFO 69400 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
15:52:11:333  INFO 69400 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
15:52:12:316  INFO 69400 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
15:52:13:152  INFO 69400 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 0eb0a9bd-74c7-4458-9024-c7618a8ec850
15:52:13:203  INFO 69400 --- [main] org.reflections.Reflections              : Reflections took 32 ms to scan 1 urls, producing 3 keys and 6 values 
15:52:13:234  INFO 69400 --- [main] org.reflections.Reflections              : Reflections took 14 ms to scan 1 urls, producing 4 keys and 9 values 
15:52:13:248  INFO 69400 --- [main] org.reflections.Reflections              : Reflections took 11 ms to scan 1 urls, producing 3 keys and 10 values 
15:52:13:251  WARN 69400 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
15:52:13:263  INFO 69400 --- [main] org.reflections.Reflections              : Reflections took 10 ms to scan 1 urls, producing 1 keys and 5 values 
15:52:13:277  INFO 69400 --- [main] org.reflections.Reflections              : Reflections took 11 ms to scan 1 urls, producing 1 keys and 7 values 
15:52:13:288  INFO 69400 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 2 keys and 8 values 
15:52:13:290  WARN 69400 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
15:52:13:291  INFO 69400 --- [main] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] RpcClient init label, labels = {module=naming, source=sdk}
15:52:13:293  INFO 69400 --- [main] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
15:52:13:293  INFO 69400 --- [main] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
15:52:13:294  INFO 69400 --- [main] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
15:52:13:296  INFO 69400 --- [main] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Try to connect to server on start up, server: {serverIp = '43.133.192.187', server main port = 8848}
15:52:15:447  INFO 69400 --- [main] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Success to connect to server [43.133.192.187:8848] on start up, connectionId = 1704444735456_144.48.139.118_3238
15:52:15:448  INFO 69400 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Notify connected event to listeners.
15:52:15:449  INFO 69400 --- [main] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
15:52:15:451  INFO 69400 --- [main] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1123/0x000000080079a440
15:52:15:589  INFO 69400 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
15:52:15:700  INFO 69400 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.0.113:8085 register finished
15:52:16:080  INFO 69400 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Receive server push request, request = NotifySubscriberRequest, requestId = 1262
15:52:16:083  INFO 69400 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Ack server push request, request = NotifySubscriberRequest, requestId = 1262
15:52:16:235  INFO 69400 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
15:52:16:238  INFO 69400 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
15:52:16:264  INFO 69400 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
15:52:16:368  INFO 69400 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [43.133.192.187:5672]
15:52:16:759  INFO 69400 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#1686ed85:0/SimpleConnection@750b200b [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 3242]
15:52:18:259  INFO 69400 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 10.94 seconds (JVM running for 12.356)
15:57:58:018  INFO 69400 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
15:57:58:019  INFO 69400 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
15:57:58:020  INFO 69400 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
15:57:58:095  INFO 69400 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
15:57:59:701  INFO 69400 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
15:57:59:815 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100000004580&ids=100001511821 HTTP/1.1
15:57:59:816 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
15:57:59:816 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
15:58:00:270 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (453ms)
15:58:00:271 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
15:58:00:271 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
15:58:00:271 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 08:58:00 GMT
15:58:00:271 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
15:58:00:271 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
15:58:00:271 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
15:58:00:272 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100000004580","name":"薇妮(viney)女士单肩包 时尚牛皮女包百搭斜挎包女士手提大包(经典黑)","price":87900,"stock":9993,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t5590/64/5811657380/234462/5398e856/5965e173N34179777.jpg!q70.jpg.webp","category":"真皮包","brand":"viney","spec":"{\"颜色\": \"黑色\"}","sold":22233,"commentCount":2223232,"isAD":false,"status":1},{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":10000,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
15:58:00:273 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (871-byte body)
15:58:00:328 DEBUG 69400 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
15:58:00:350 DEBUG 69400 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743195128624508929(Long), 189500(Integer), 3(Integer), 1(Long), 1(Integer)
15:58:00:537 DEBUG 69400 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
15:58:00:547 DEBUG 69400 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
15:58:00:548 DEBUG 69400 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743195128624508929(Long), 100000004580(Long), 2(Integer), 薇妮(viney)女士单肩包 时尚牛皮女包百搭斜挎包女士手提大包(经典黑)(String), {"颜色": "黑色"}(String), 87900(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t5590/64/5811657380/234462/5398e856/5965e173N34179777.jpg!q70.jpg.webp(String)
15:58:00:549 DEBUG 69400 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743195128624508929(Long), 100001511821(Long), 1(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
15:58:00:575  INFO 69400 --- [nacos-grpc-client-executor-86] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Receive server push request, request = NotifySubscriberRequest, requestId = 1268
15:58:00:576  INFO 69400 --- [nacos-grpc-client-executor-86] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Ack server push request, request = NotifySubscriberRequest, requestId = 1268
15:58:00:842 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100000004580&ids=100001511821 HTTP/1.1
15:58:00:842 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
15:58:00:842 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
15:58:01:269 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (427ms)
15:58:01:269 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
15:58:01:269 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
15:58:01:269 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 08:58:01 GMT
15:58:01:269 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
15:58:01:269 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
15:58:01:278 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
15:58:01:278 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 69
15:58:01:278 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
15:58:01:278 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
15:58:01:278 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
15:58:01:278 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100000004580","num":2},{"itemId":"100001511821","num":1}]
15:58:01:278 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (69-byte body)
15:58:01:478  INFO 69400 --- [nacos-grpc-client-executor-89] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Receive server push request, request = NotifySubscriberRequest, requestId = 1269
15:58:01:478  INFO 69400 --- [nacos-grpc-client-executor-89] com.alibaba.nacos.common.remote.client   : [0eb0a9bd-74c7-4458-9024-c7618a8ec850] Ack server push request, request = NotifySubscriberRequest, requestId = 1269
15:58:01:658 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (379ms)
15:58:01:658 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
15:58:01:658 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
15:58:01:658 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 08:58:01 GMT
15:58:01:658 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
15:58:01:658 DEBUG 69400 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
15:58:01:866 ERROR 69400 --- [http-nio-8085-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalArgumentException: SimpleMessageConverter only supports String, byte[] and Serializable payloads, received: com.hmall.common.domain.MultiDelayMessage] with root cause

java.lang.IllegalArgumentException: SimpleMessageConverter only supports String, byte[] and Serializable payloads, received: com.hmall.common.domain.MultiDelayMessage
	at org.springframework.amqp.support.converter.SimpleMessageConverter.createMessage(SimpleMessageConverter.java:164) ~[spring-amqp-2.4.12.jar:2.4.12]
	at org.springframework.amqp.support.converter.AbstractMessageConverter.createMessage(AbstractMessageConverter.java:88) ~[spring-amqp-2.4.12.jar:2.4.12]
	at org.springframework.amqp.support.converter.AbstractMessageConverter.toMessage(AbstractMessageConverter.java:70) ~[spring-amqp-2.4.12.jar:2.4.12]
	at org.springframework.amqp.support.converter.AbstractMessageConverter.toMessage(AbstractMessageConverter.java:58) ~[spring-amqp-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.convertMessageIfNecessary(RabbitTemplate.java:1861) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1167) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.convertAndSend(RabbitTemplate.java:1160) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at com.hmall.trade.service.impl.OrderServiceImpl.createOrder(OrderServiceImpl.java:104) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$3a24c8e.createOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.controller.OrderController.createOrder(OrderController.java:30) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]

16:00:45:923  WARN 69400 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:00:45:923  WARN 69400 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:00:45:924  WARN 69400 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:00:45:924  WARN 69400 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:00:46:021  INFO 69400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:00:46:110  INFO 69400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:00:46:216  INFO 69400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:00:46:783  INFO 69400 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:00:47:298  INFO 69400 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:00:47:391  INFO 69400 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:00:47:728  INFO 69400 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:00:47:729  INFO 69400 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@17457848[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:00:47:729  INFO 69400 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1704444735456_144.48.139.118_3238
16:00:47:736  INFO 69400 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7c03efc2[Running, pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 126]
16:00:47:840  INFO 69400 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:00:47:840  INFO 69400 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:00:47:843  INFO 69400 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
16:00:48:798  INFO 69400 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
16:00:58:492  INFO 97056 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 97056 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
16:00:58:495 DEBUG 97056 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
16:00:58:496  INFO 97056 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
16:01:00:370  INFO 97056 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ecace3d6-5c21-3c65-a621-02d0c307df14
16:01:00:835  INFO 97056 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
16:01:00:844  INFO 97056 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
16:01:00:844  INFO 97056 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
16:01:01:089  INFO 97056 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
16:01:01:089  INFO 97056 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2521 ms
16:01:01:988  INFO 97056 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
16:01:02:272  INFO 97056 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
16:01:02:434  INFO 97056 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
16:01:03:563  INFO 97056 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
16:01:04:538  INFO 97056 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 5d6046ac-071c-415b-9e3e-943fff0d6537
16:01:04:583  INFO 97056 --- [main] org.reflections.Reflections              : Reflections took 24 ms to scan 1 urls, producing 3 keys and 6 values 
16:01:04:611  INFO 97056 --- [main] org.reflections.Reflections              : Reflections took 11 ms to scan 1 urls, producing 4 keys and 9 values 
16:01:04:622  INFO 97056 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 3 keys and 10 values 
16:01:04:626  WARN 97056 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:01:04:634  INFO 97056 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 1 keys and 5 values 
16:01:04:646  INFO 97056 --- [main] org.reflections.Reflections              : Reflections took 9 ms to scan 1 urls, producing 1 keys and 7 values 
16:01:04:657  INFO 97056 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 2 keys and 8 values 
16:01:04:660  WARN 97056 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:01:04:661  INFO 97056 --- [main] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] RpcClient init label, labels = {module=naming, source=sdk}
16:01:04:664  INFO 97056 --- [main] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
16:01:04:664  INFO 97056 --- [main] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
16:01:04:665  INFO 97056 --- [main] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
16:01:04:667  INFO 97056 --- [main] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Try to connect to server on start up, server: {serverIp = '43.133.192.187', server main port = 8848}
16:01:07:219  INFO 97056 --- [main] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Success to connect to server [43.133.192.187:8848] on start up, connectionId = 1704445267202_144.48.139.118_3791
16:01:07:220  INFO 97056 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Notify connected event to listeners.
16:01:07:221  INFO 97056 --- [main] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
16:01:07:223  INFO 97056 --- [main] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1123/0x000000080079a440
16:01:07:380  INFO 97056 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
16:01:07:483  INFO 97056 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.0.113:8085 register finished
16:01:07:870  INFO 97056 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Receive server push request, request = NotifySubscriberRequest, requestId = 1271
16:01:07:877  INFO 97056 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Ack server push request, request = NotifySubscriberRequest, requestId = 1271
16:01:08:155  INFO 97056 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
16:01:08:158  INFO 97056 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
16:01:08:182  INFO 97056 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
16:01:08:273  INFO 97056 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [43.133.192.187:5672]
16:01:08:693  INFO 97056 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#35ceec81:0/SimpleConnection@1832b0f6 [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 3794]
16:01:10:309  INFO 97056 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 13.466 seconds (JVM running for 15.272)
16:01:58:243  INFO 97056 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
16:01:58:243  INFO 97056 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
16:01:58:244  INFO 97056 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
16:01:58:291  INFO 97056 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
16:01:59:954  INFO 97056 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
16:02:00:068 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:02:00:068 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:02:00:068 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:02:00:540 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (471ms)
16:02:00:540 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:02:00:540 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:02:00:540 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:02:00 GMT
16:02:00:540 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:02:00:540 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:02:00:541 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:02:00:542 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9999,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:02:00:542 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:02:00:592 DEBUG 97056 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:02:00:614 DEBUG 97056 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743196136368967682(Long), 27400(Integer), 3(Integer), 1(Long), 1(Integer)
16:02:00:797  INFO 97056 --- [nacos-grpc-client-executor-21] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Receive server push request, request = NotifySubscriberRequest, requestId = 1273
16:02:00:798  INFO 97056 --- [nacos-grpc-client-executor-21] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Ack server push request, request = NotifySubscriberRequest, requestId = 1273
16:02:00:810 DEBUG 97056 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:02:00:825 DEBUG 97056 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:02:00:826 DEBUG 97056 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743196136368967682(Long), 100001511821(Long), 2(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:02:01:039 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:02:01:039 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:02:01:039 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:02:01:482 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (441ms)
16:02:01:482 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:02:01:482 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:02:01:482 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:02:01 GMT
16:02:01:482 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:02:01:482 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:02:01:491 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:02:01:491 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:02:01:491 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:02:01:491 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:02:01:491 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:02:01:491 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":2}]
16:02:01:491 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:02:01:698  INFO 97056 --- [nacos-grpc-client-executor-24] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Receive server push request, request = NotifySubscriberRequest, requestId = 1274
16:02:01:698  INFO 97056 --- [nacos-grpc-client-executor-24] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Ack server push request, request = NotifySubscriberRequest, requestId = 1274
16:02:01:789 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (298ms)
16:02:01:789 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:02:01:789 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:02:01:790 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:02:01 GMT
16:02:01:790 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:02:01:790 DEBUG 97056 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:02:02:109 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:02:02:110 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743196136368967682(Long)
16:02:02:223 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:02:02:231 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743196136368967682 HTTP/1.1
16:02:02:232 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:02:02:240 DEBUG 97056 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:02:02:241 DEBUG 97056 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743196136368967682(Long)
16:02:02:364 DEBUG 97056 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:02:02:893  INFO 97056 --- [nacos-grpc-client-executor-28] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Receive server push request, request = NotifySubscriberRequest, requestId = 1276
16:02:02:893  INFO 97056 --- [nacos-grpc-client-executor-28] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Ack server push request, request = NotifySubscriberRequest, requestId = 1276
16:02:04:667 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (2434ms)
16:02:04:667 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:02:04:668 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:02:04:668 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:02:04 GMT
16:02:04:668 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:02:04:668 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:02:04:763 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:02:04:764 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743196136368967682(Long)
16:02:04:873 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:02:04:904 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?
16:02:04:909 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer)
16:02:05:103 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 46
16:02:05:113 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
16:02:05:113 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1743196136368967682(Long)
16:02:05:210 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
16:02:05:215 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.service.impl.OrderServiceImpl  : 获取需要更新的商品库存信息：[ItemStockDTO(id=100001511821, stock=2)]
16:02:05:217 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> PUT http://item-service/items/stock/return HTTP/1.1
16:02:05:217 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Length: 33
16:02:05:217 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Type: application/json
16:02:05:217 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:02:05:217 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] [{"id":"100001511821","stock":2}]
16:02:05:217 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> END HTTP (33-byte body)
16:02:05:234 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- HTTP/1.1 404  (16ms)
16:02:05:234 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] connection: keep-alive
16:02:05:234 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] content-type: application/json
16:02:05:234 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] date: Fri, 05 Jan 2024 09:02:05 GMT
16:02:05:234 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] keep-alive: timeout=60
16:02:05:234 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] transfer-encoding: chunked
16:02:05:234 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] vary: Origin
16:02:05:235 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] vary: Access-Control-Request-Method
16:02:05:235 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] vary: Access-Control-Request-Headers
16:02:05:235 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:02:05:235 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] {"timestamp":"2024-01-05T09:02:05.230+00:00","status":404,"error":"Not Found","path":"/items/stock/return"}
16:02:05:235 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- END HTTP (107-byte body)
16:02:05:241  WARN 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] s.a.r.l.ConditionalRejectingErrorHandler : Execution of Rabbit message listener failed.

org.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener method 'public void com.hmall.trade.listener.OrderStatusListener.listenOrderCheckDelayMessage(com.hmall.common.domain.MultiDelayMessage<java.lang.Long>)' threw exception
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:272) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: feign.FeignException$NotFound: [404 ] during [PUT] to [http://item-service/items/stock/return] [ItemClient#returnStock(Collection)]: [{"timestamp":"2024-01-05T09:02:05.230+00:00","status":404,"error":"Not Found","path":"/items/stock/return"}]
	at feign.FeignException.clientErrorStatus(FeignException.java:219) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:194) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at com.sun.proxy.$Proxy114.returnStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:164) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$84b6bda7.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderStatusListener.listenOrderCheckDelayMessage(OrderStatusListener.java:65) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	... 13 common frames omitted

16:02:05:250 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:02:05:251 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743196136368967682(Long)
16:02:05:355 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:02:05:356 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:02:05:357 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743196136368967682(Long)
16:02:05:452 DEBUG 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:05:20:366  INFO 97056 --- [nacos-grpc-client-executor-77] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Receive server push request, request = NotifySubscriberRequest, requestId = 1278
16:05:20:370  INFO 97056 --- [nacos-grpc-client-executor-77] com.alibaba.nacos.common.remote.client   : [5d6046ac-071c-415b-9e3e-943fff0d6537] Ack server push request, request = NotifySubscriberRequest, requestId = 1278
16:05:41:921  WARN 97056 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:05:41:921  WARN 97056 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:05:41:922  WARN 97056 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:05:41:922  WARN 97056 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:05:42:027  INFO 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:05:42:124  INFO 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:05:42:389  INFO 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:05:42:736  INFO 97056 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:05:43:220  INFO 97056 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:05:43:317  INFO 97056 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:05:43:647  INFO 97056 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:05:43:647  INFO 97056 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@f390fe7[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:05:43:647  INFO 97056 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1704445267202_144.48.139.118_3791
16:05:43:652  INFO 97056 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3e37d001[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 83]
16:05:43:866  INFO 97056 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:05:43:866  INFO 97056 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:05:43:870  INFO 97056 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
16:05:44:846  INFO 97056 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
16:05:52:616  INFO 97012 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 97012 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
16:05:52:618 DEBUG 97012 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
16:05:52:619  INFO 97012 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
16:05:53:841  INFO 97012 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ecace3d6-5c21-3c65-a621-02d0c307df14
16:05:54:265  INFO 97012 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
16:05:54:275  INFO 97012 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
16:05:54:275  INFO 97012 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
16:05:54:527  INFO 97012 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
16:05:54:528  INFO 97012 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1862 ms
16:05:55:453  INFO 97012 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
16:05:55:724  INFO 97012 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
16:05:55:889  INFO 97012 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
16:05:56:959  INFO 97012 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
16:05:57:893  INFO 97012 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 3dc8559e-c653-46e5-9032-05f464249628
16:05:57:964  INFO 97012 --- [main] org.reflections.Reflections              : Reflections took 48 ms to scan 1 urls, producing 3 keys and 6 values 
16:05:57:996  INFO 97012 --- [main] org.reflections.Reflections              : Reflections took 14 ms to scan 1 urls, producing 4 keys and 9 values 
16:05:58:013  INFO 97012 --- [main] org.reflections.Reflections              : Reflections took 13 ms to scan 1 urls, producing 3 keys and 10 values 
16:05:58:017  WARN 97012 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:05:58:029  INFO 97012 --- [main] org.reflections.Reflections              : Reflections took 12 ms to scan 1 urls, producing 1 keys and 5 values 
16:05:58:053  INFO 97012 --- [main] org.reflections.Reflections              : Reflections took 20 ms to scan 1 urls, producing 1 keys and 7 values 
16:05:58:081  INFO 97012 --- [main] org.reflections.Reflections              : Reflections took 24 ms to scan 1 urls, producing 2 keys and 8 values 
16:05:58:083  WARN 97012 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:05:58:085  INFO 97012 --- [main] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] RpcClient init label, labels = {module=naming, source=sdk}
16:05:58:087  INFO 97012 --- [main] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
16:05:58:087  INFO 97012 --- [main] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
16:05:58:088  INFO 97012 --- [main] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
16:05:58:090  INFO 97012 --- [main] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] Try to connect to server on start up, server: {serverIp = '43.133.192.187', server main port = 8848}
16:06:00:463  INFO 97012 --- [main] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] Success to connect to server [43.133.192.187:8848] on start up, connectionId = 1704445560467_144.48.139.118_4129
16:06:00:464  INFO 97012 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] Notify connected event to listeners.
16:06:00:465  INFO 97012 --- [main] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
16:06:00:466  INFO 97012 --- [main] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1123/0x000000080079a040
16:06:00:618  INFO 97012 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
16:06:00:720  INFO 97012 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.0.113:8085 register finished
16:06:01:128  INFO 97012 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] Receive server push request, request = NotifySubscriberRequest, requestId = 1282
16:06:01:134  INFO 97012 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [3dc8559e-c653-46e5-9032-05f464249628] Ack server push request, request = NotifySubscriberRequest, requestId = 1282
16:06:01:372  INFO 97012 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
16:06:01:375  INFO 97012 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
16:06:01:411  INFO 97012 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
16:06:01:538  INFO 97012 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [43.133.192.187:5672]
16:06:01:926  INFO 97012 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#1686ed85:0/SimpleConnection@24888d8b [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 4133]
16:06:03:447  INFO 97012 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 11.986 seconds (JVM running for 13.659)
16:09:44:452  WARN 97012 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:09:44:452  WARN 97012 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:09:44:452  WARN 97012 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:09:44:453  WARN 97012 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:09:44:572  INFO 97012 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:09:44:663  INFO 97012 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:09:44:756  INFO 97012 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:09:45:216  INFO 97012 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:09:45:700  INFO 97012 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:09:45:798  INFO 97012 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:09:46:129  INFO 97012 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:09:46:129  INFO 97012 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@3b10e872[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:09:46:129  INFO 97012 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1704445560467_144.48.139.118_4129
16:09:46:134  INFO 97012 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@4e6a8230[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 60]
16:09:46:234  INFO 97012 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:09:46:234  INFO 97012 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:09:53:734  INFO 41520 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 41520 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
16:09:53:736 DEBUG 41520 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
16:09:53:736  INFO 41520 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
16:09:54:892  INFO 41520 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ecace3d6-5c21-3c65-a621-02d0c307df14
16:09:55:267  INFO 41520 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
16:09:55:276  INFO 41520 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
16:09:55:277  INFO 41520 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
16:09:55:495  INFO 41520 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
16:09:55:496  INFO 41520 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1718 ms
16:09:56:363  INFO 41520 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
16:09:56:595  INFO 41520 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
16:09:56:744  INFO 41520 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
16:09:57:694  INFO 41520 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
16:09:58:551  INFO 41520 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 9519e36f-4dc5-4685-aae3-767fef412761
16:09:58:595  INFO 41520 --- [main] org.reflections.Reflections              : Reflections took 24 ms to scan 1 urls, producing 3 keys and 6 values 
16:09:58:622  INFO 41520 --- [main] org.reflections.Reflections              : Reflections took 10 ms to scan 1 urls, producing 4 keys and 9 values 
16:09:58:633  INFO 41520 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 3 keys and 10 values 
16:09:58:636  WARN 41520 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:09:58:644  INFO 41520 --- [main] org.reflections.Reflections              : Reflections took 7 ms to scan 1 urls, producing 1 keys and 5 values 
16:09:58:655  INFO 41520 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 1 keys and 7 values 
16:09:58:667  INFO 41520 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 2 keys and 8 values 
16:09:58:670  WARN 41520 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:09:58:671  INFO 41520 --- [main] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] RpcClient init label, labels = {module=naming, source=sdk}
16:09:58:672  INFO 41520 --- [main] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
16:09:58:673  INFO 41520 --- [main] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
16:09:58:673  INFO 41520 --- [main] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
16:09:58:675  INFO 41520 --- [main] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Try to connect to server on start up, server: {serverIp = '43.133.192.187', server main port = 8848}
16:10:00:984  INFO 41520 --- [main] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Success to connect to server [43.133.192.187:8848] on start up, connectionId = 1704445801001_144.48.139.118_4385
16:10:00:985  INFO 41520 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Notify connected event to listeners.
16:10:00:986  INFO 41520 --- [main] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
16:10:00:988  INFO 41520 --- [main] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1123/0x000000080079b840
16:10:01:137  INFO 41520 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
16:10:01:236  INFO 41520 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.0.113:8085 register finished
16:10:01:631  INFO 41520 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Receive server push request, request = NotifySubscriberRequest, requestId = 1286
16:10:01:634  INFO 41520 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Ack server push request, request = NotifySubscriberRequest, requestId = 1286
16:10:01:756  INFO 41520 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
16:10:01:759  INFO 41520 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
16:10:01:781  INFO 41520 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
16:10:01:874  INFO 41520 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [43.133.192.187:5672]
16:10:02:285  INFO 41520 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#1686ed85:0/SimpleConnection@750b200b [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 4389]
16:10:03:795  INFO 41520 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 11.119 seconds (JVM running for 12.568)
16:10:23:583  INFO 41520 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
16:10:23:584  INFO 41520 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
16:10:23:586  INFO 41520 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
16:10:23:640  INFO 41520 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
16:10:25:203  INFO 41520 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
16:10:25:311 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:10:25:311 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:10:25:312 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:10:25:752 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (440ms)
16:10:25:752 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:10:25:752 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:10:25:752 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:10:25 GMT
16:10:25:752 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:10:25:753 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:10:25:753 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:10:25:754 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9997,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:10:25:754 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:10:25:812 DEBUG 41520 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:10:25:834 DEBUG 41520 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743198255406858242(Long), 27400(Integer), 3(Integer), 1(Long), 1(Integer)
16:10:26:015 DEBUG 41520 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:10:26:027 DEBUG 41520 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:10:26:029 DEBUG 41520 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743198255406858242(Long), 100001511821(Long), 2(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:10:26:036  INFO 41520 --- [nacos-grpc-client-executor-18] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Receive server push request, request = NotifySubscriberRequest, requestId = 1288
16:10:26:037  INFO 41520 --- [nacos-grpc-client-executor-18] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Ack server push request, request = NotifySubscriberRequest, requestId = 1288
16:10:26:228 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:10:26:228 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:10:26:228 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:10:26:657 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (428ms)
16:10:26:657 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:10:26:657 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:10:26:657 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:10:26 GMT
16:10:26:657 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:10:26:657 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:10:26:665 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:10:26:665 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:10:26:666 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:10:26:666 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:10:26:666 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:10:26:666 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":2}]
16:10:26:666 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:10:26:936  INFO 41520 --- [nacos-grpc-client-executor-21] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Receive server push request, request = NotifySubscriberRequest, requestId = 1289
16:10:26:939  INFO 41520 --- [nacos-grpc-client-executor-21] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Ack server push request, request = NotifySubscriberRequest, requestId = 1289
16:10:26:945 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (279ms)
16:10:26:946 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:10:26:946 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:10:26:946 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:10:26 GMT
16:10:26:946 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:10:26:946 DEBUG 41520 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:10:27:251 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:10:27:251 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743198255406858242(Long)
16:10:27:351 DEBUG 41520 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:10:27:351 DEBUG 41520 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743198255406858242(Long)
16:10:27:357 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:10:27:363 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743198255406858242 HTTP/1.1
16:10:27:363 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:10:27:447 DEBUG 41520 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:10:27:683 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (319ms)
16:10:27:683 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:10:27:683 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:10:27:684 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:10:27 GMT
16:10:27:684 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:10:27:684 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:10:27:776 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:10:27:776 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743198255406858242(Long)
16:10:27:867 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:10:27:867 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743198255406858242 HTTP/1.1
16:10:27:868 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:10:27:987 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (119ms)
16:10:27:988 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:10:27:988 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:10:27:988 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:10:27 GMT
16:10:27:988 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:10:27:988 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:10:27:988 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:10:27:989 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743198263401185283","bizOrderNo":"1743198255406858242","payOrderNo":"1743198263401185282","bizUserId":"1","payChannelCode":"balance","amount":27400,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:10:28","qrCodeUrl":null,"createTime":"2024-01-05T17:10:28","updateTime":"2024-01-05T17:10:28"}
16:10:27:989 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:10:28:037  INFO 41520 --- [nacos-grpc-client-executor-25] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Receive server push request, request = NotifySubscriberRequest, requestId = 1290
16:10:28:038  INFO 41520 --- [nacos-grpc-client-executor-25] com.alibaba.nacos.common.remote.client   : [9519e36f-4dc5-4685-aae3-767fef412761] Ack server push request, request = NotifySubscriberRequest, requestId = 1290
16:10:28:089 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:10:28:089 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743198255406858242(Long)
16:10:28:184 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:10:28:185 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743198255406858242 HTTP/1.1
16:10:28:185 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:10:28:290 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (105ms)
16:10:28:290 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:10:28:290 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:10:28:290 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:10:27 GMT
16:10:28:290 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:10:28:290 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:10:28:290 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:10:28:291 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743198263401185283","bizOrderNo":"1743198255406858242","payOrderNo":"1743198263401185282","bizUserId":"1","payChannelCode":"balance","amount":27400,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:10:28","qrCodeUrl":null,"createTime":"2024-01-05T17:10:28","updateTime":"2024-01-05T17:10:28"}
16:10:28:291 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:10:28:292 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:10:28:293 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743198255406858242(Long)
16:10:28:383 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:10:28:406 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?
16:10:28:410 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer)
16:10:28:594 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 47
16:10:28:603 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
16:10:28:604 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1743198255406858242(Long)
16:10:28:700 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
16:10:28:704 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.service.impl.OrderServiceImpl  : 获取需要更新的商品库存信息：[ItemStockDTO(id=100001511821, stock=2)]
16:10:28:706 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> PUT http://item-service/items/stock/return HTTP/1.1
16:10:28:706 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Length: 33
16:10:28:706 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Type: application/json
16:10:28:706 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:10:28:706 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] [{"id":"100001511821","stock":2}]
16:10:28:706 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> END HTTP (33-byte body)
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- HTTP/1.1 404  (15ms)
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] connection: keep-alive
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] content-type: application/json
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] date: Fri, 05 Jan 2024 09:10:28 GMT
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] keep-alive: timeout=60
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] transfer-encoding: chunked
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] vary: Origin
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] vary: Access-Control-Request-Method
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] vary: Access-Control-Request-Headers
16:10:28:722 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:10:28:723 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] {"timestamp":"2024-01-05T09:10:28.717+00:00","status":404,"error":"Not Found","path":"/items/stock/return"}
16:10:28:723 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- END HTTP (107-byte body)
16:10:28:728  WARN 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] s.a.r.l.ConditionalRejectingErrorHandler : Execution of Rabbit message listener failed.

org.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener method 'public void com.hmall.trade.listener.OrderStatusListener.listenOrderCheckDelayMessage(com.hmall.common.domain.MultiDelayMessage<java.lang.Long>)' threw exception
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:272) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: feign.FeignException$NotFound: [404 ] during [PUT] to [http://item-service/items/stock/return] [ItemClient#returnStock(Collection)]: [{"timestamp":"2024-01-05T09:10:28.717+00:00","status":404,"error":"Not Found","path":"/items/stock/return"}]
	at feign.FeignException.clientErrorStatus(FeignException.java:219) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:194) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at com.sun.proxy.$Proxy114.returnStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:167) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$3a24c8e.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderStatusListener.listenOrderCheckDelayMessage(OrderStatusListener.java:66) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	... 13 common frames omitted

16:10:28:824 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:10:28:825 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743198255406858242(Long)
16:10:28:914 DEBUG 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:13:33:549  WARN 41520 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:13:33:550  WARN 41520 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:13:33:550  WARN 41520 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:13:33:551  WARN 41520 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:13:33:650  INFO 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:13:33:740  INFO 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:13:34:395  INFO 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:13:34:434  INFO 41520 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:13:34:915  INFO 41520 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:13:35:014  INFO 41520 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:13:35:527  INFO 41520 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:13:35:527  INFO 41520 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@74076de9[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:13:35:528  INFO 41520 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1704445801001_144.48.139.118_4385
16:13:35:533  INFO 41520 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@3f207c4d[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 74]
16:13:35:747  INFO 41520 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:13:35:747  INFO 41520 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:13:35:750  INFO 41520 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
16:13:36:692  INFO 41520 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
16:13:42:036  INFO 36080 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 36080 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
16:13:42:038 DEBUG 36080 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
16:13:42:039  INFO 36080 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
16:13:44:131  INFO 36080 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ecace3d6-5c21-3c65-a621-02d0c307df14
16:13:44:633  INFO 36080 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
16:13:44:643  INFO 36080 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
16:13:44:643  INFO 36080 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
16:13:44:930  INFO 36080 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
16:13:44:930  INFO 36080 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2831 ms
16:13:46:049  INFO 36080 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
16:13:46:403  INFO 36080 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
16:13:46:597  INFO 36080 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
16:13:47:885  INFO 36080 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
16:13:48:961  INFO 36080 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of cec29d7e-7128-4c95-bbf9-9ea948e832e0
16:13:49:017  INFO 36080 --- [main] org.reflections.Reflections              : Reflections took 32 ms to scan 1 urls, producing 3 keys and 6 values 
16:13:49:073  INFO 36080 --- [main] org.reflections.Reflections              : Reflections took 19 ms to scan 1 urls, producing 4 keys and 9 values 
16:13:49:086  INFO 36080 --- [main] org.reflections.Reflections              : Reflections took 10 ms to scan 1 urls, producing 3 keys and 10 values 
16:13:49:090  WARN 36080 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:13:49:098  INFO 36080 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 1 keys and 5 values 
16:13:49:109  INFO 36080 --- [main] org.reflections.Reflections              : Reflections took 9 ms to scan 1 urls, producing 1 keys and 7 values 
16:13:49:120  INFO 36080 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 2 keys and 8 values 
16:13:49:122  WARN 36080 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:13:49:124  INFO 36080 --- [main] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] RpcClient init label, labels = {module=naming, source=sdk}
16:13:49:126  INFO 36080 --- [main] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
16:13:49:127  INFO 36080 --- [main] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
16:13:49:128  INFO 36080 --- [main] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
16:13:49:130  INFO 36080 --- [main] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Try to connect to server on start up, server: {serverIp = '43.133.192.187', server main port = 8848}
16:13:51:748  INFO 36080 --- [main] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Success to connect to server [43.133.192.187:8848] on start up, connectionId = 1704446031763_144.48.139.118_3716
16:13:51:749  INFO 36080 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Notify connected event to listeners.
16:13:51:750  INFO 36080 --- [main] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
16:13:51:752  INFO 36080 --- [main] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1123/0x000000080079b840
16:13:51:905  INFO 36080 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
16:13:52:006  INFO 36080 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.0.113:8085 register finished
16:13:52:440  INFO 36080 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Receive server push request, request = NotifySubscriberRequest, requestId = 1293
16:13:52:443  INFO 36080 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Ack server push request, request = NotifySubscriberRequest, requestId = 1293
16:13:52:535  INFO 36080 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
16:13:52:540  INFO 36080 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
16:13:52:567  INFO 36080 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
16:13:52:670  INFO 36080 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [43.133.192.187:5672]
16:13:53:054  INFO 36080 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#3f45dfec:0/SimpleConnection@1239c268 [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 3719]
16:13:54:518  INFO 36080 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 13.839 seconds (JVM running for 15.814)
16:14:13:172  INFO 36080 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
16:14:13:172  INFO 36080 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
16:14:13:173  INFO 36080 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
16:14:13:230  INFO 36080 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
16:14:14:742  INFO 36080 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
16:14:14:846 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:14:14:846 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:14:14:846 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:14:15:348 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (501ms)
16:14:15:349 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:14:15:349 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:14:15:349 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:14:15 GMT
16:14:15:349 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:14:15:349 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:14:15:349 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:14:15:350 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9995,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:14:15:351 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:14:15:417 DEBUG 36080 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:14:15:442 DEBUG 36080 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743199218439958529(Long), 13700(Integer), 3(Integer), 1(Long), 1(Integer)
16:14:15:613 DEBUG 36080 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:14:15:627 DEBUG 36080 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:14:15:629 DEBUG 36080 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743199218439958529(Long), 100001511821(Long), 1(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:14:15:644  INFO 36080 --- [nacos-grpc-client-executor-17] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Receive server push request, request = NotifySubscriberRequest, requestId = 1295
16:14:15:645  INFO 36080 --- [nacos-grpc-client-executor-17] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Ack server push request, request = NotifySubscriberRequest, requestId = 1295
16:14:15:816 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:14:15:816 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:14:15:816 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:14:16:261 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (445ms)
16:14:16:262 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:14:16:262 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:14:16:262 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:14:16 GMT
16:14:16:262 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:14:16:262 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:14:16:274 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:14:16:274 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:14:16:274 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:14:16:274 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:14:16:274 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:14:16:274 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":1}]
16:14:16:274 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:14:16:444  INFO 36080 --- [nacos-grpc-client-executor-20] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Receive server push request, request = NotifySubscriberRequest, requestId = 1296
16:14:16:448  INFO 36080 --- [nacos-grpc-client-executor-20] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Ack server push request, request = NotifySubscriberRequest, requestId = 1296
16:14:16:553 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (277ms)
16:14:16:553 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:14:16:553 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:14:16:553 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:14:16 GMT
16:14:16:553 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:14:16:553 DEBUG 36080 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:14:16:845 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:14:16:846 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199218439958529(Long)
16:14:16:948 DEBUG 36080 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:14:16:948 DEBUG 36080 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199218439958529(Long)
16:14:16:952 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:14:16:957 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743199218439958529 HTTP/1.1
16:14:16:957 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:14:17:036 DEBUG 36080 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:14:17:276 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (319ms)
16:14:17:276 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:14:17:276 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:14:17:276 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:14:17 GMT
16:14:17:276 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:14:17:276 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:14:17:363 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:14:17:364 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199218439958529(Long)
16:14:17:453 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:14:17:453 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743199218439958529 HTTP/1.1
16:14:17:453 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:14:17:563 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (109ms)
16:14:17:563 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:14:17:563 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:14:17:563 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:14:17 GMT
16:14:17:563 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:14:17:563 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:14:17:563 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:14:17:564 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743199226358857730","bizOrderNo":"1743199218439958529","payOrderNo":"1743199226358857729","bizUserId":"1","payChannelCode":"balance","amount":13700,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:14:17","qrCodeUrl":null,"createTime":"2024-01-05T17:14:17","updateTime":"2024-01-05T17:14:17"}
16:14:17:564 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:14:17:645  INFO 36080 --- [nacos-grpc-client-executor-23] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Receive server push request, request = NotifySubscriberRequest, requestId = 1297
16:14:17:646  INFO 36080 --- [nacos-grpc-client-executor-23] com.alibaba.nacos.common.remote.client   : [cec29d7e-7128-4c95-bbf9-9ea948e832e0] Ack server push request, request = NotifySubscriberRequest, requestId = 1297
16:14:17:656 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:14:17:656 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199218439958529(Long)
16:14:17:748 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:14:17:748 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743199218439958529 HTTP/1.1
16:14:17:748 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:14:17:853 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (105ms)
16:14:17:854 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:14:17:854 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:14:17:854 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:14:17 GMT
16:14:17:854 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:14:17:854 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:14:17:854 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:14:17:854 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743199226358857730","bizOrderNo":"1743199218439958529","payOrderNo":"1743199226358857729","bizUserId":"1","payChannelCode":"balance","amount":13700,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:14:17","qrCodeUrl":null,"createTime":"2024-01-05T17:14:17","updateTime":"2024-01-05T17:14:17"}
16:14:17:855 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:14:17:856 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:14:17:856 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199218439958529(Long)
16:14:17:983 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:14:18:014 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?
16:14:18:018 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer)
16:14:18:196 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 48
16:14:18:206 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
16:14:18:207 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1743199218439958529(Long)
16:14:18:295 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
16:14:18:303 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.service.impl.OrderServiceImpl  : 获取需要更新的商品库存信息：[ItemStockDTO(id=100001511821, stock=1)]
16:14:18:304 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> PUT http://item-service/items/stock/return HTTP/1.1
16:14:18:304 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Length: 33
16:14:18:304 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Type: application/json
16:14:18:304 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:14:18:304 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] [{"id":"100001511821","stock":1}]
16:14:18:304 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> END HTTP (33-byte body)
16:14:18:312 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- HTTP/1.1 404  (6ms)
16:14:18:312 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] connection: keep-alive
16:14:18:312 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] content-type: application/json
16:14:18:313 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] date: Fri, 05 Jan 2024 09:14:18 GMT
16:14:18:313 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] keep-alive: timeout=60
16:14:18:313 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] transfer-encoding: chunked
16:14:18:313 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] vary: Origin
16:14:18:313 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] vary: Access-Control-Request-Method
16:14:18:313 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] vary: Access-Control-Request-Headers
16:14:18:313 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:14:18:313 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] {"timestamp":"2024-01-05T09:14:18.311+00:00","status":404,"error":"Not Found","path":"/items/stock/return"}
16:14:18:313 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- END HTTP (107-byte body)
16:14:18:320  WARN 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] s.a.r.l.ConditionalRejectingErrorHandler : Execution of Rabbit message listener failed.

org.springframework.amqp.rabbit.support.ListenerExecutionFailedException: Listener method 'public void com.hmall.trade.listener.OrderStatusListener.listenOrderCheckDelayMessage(com.hmall.common.domain.MultiDelayMessage<java.lang.Long>)' threw exception
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:272) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]
Caused by: feign.FeignException$NotFound: [404 ] during [PUT] to [http://item-service/items/stock/return] [ItemClient#returnStock(Collection)]: [{"timestamp":"2024-01-05T09:14:18.311+00:00","status":404,"error":"Not Found","path":"/items/stock/return"}]
	at feign.FeignException.clientErrorStatus(FeignException.java:219) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:194) ~[feign-core-11.8.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.8.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.8.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-11.8.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-11.8.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.8.jar:na]
	at com.sun.proxy.$Proxy114.returnStock(Unknown Source) ~[na:na]
	at com.hmall.trade.service.impl.OrderServiceImpl.cancelOrder(OrderServiceImpl.java:167) ~[classes/:na]
	at com.hmall.trade.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$863dd453.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.hmall.trade.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$1d2705d5.cancelOrder(<generated>) ~[classes/:na]
	at com.hmall.trade.listener.OrderStatusListener.listenOrderCheckDelayMessage(OrderStatusListener.java:66) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119) ~[spring-messaging-5.3.27.jar:5.3.27]
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77) ~[spring-rabbit-2.4.12.jar:2.4.12]
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263) ~[spring-rabbit-2.4.12.jar:2.4.12]
	... 13 common frames omitted

16:14:18:412 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:14:18:412 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199218439958529(Long)
16:14:18:500 DEBUG 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:15:09:912  WARN 36080 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:15:09:913  WARN 36080 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:15:09:913  WARN 36080 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:15:09:913  WARN 36080 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:15:10:008  INFO 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:15:10:093  INFO 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:15:10:203  INFO 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:15:10:978  INFO 36080 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:15:11:436  INFO 36080 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:15:11:531  INFO 36080 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:15:11:856  INFO 36080 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:15:11:856  INFO 36080 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@6190eea[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:15:11:856  INFO 36080 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1704446031763_144.48.139.118_3716
16:15:11:862  INFO 36080 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7a7fea1f[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 38]
16:15:12:049  INFO 36080 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:15:12:049  INFO 36080 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:15:12:052  INFO 36080 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
16:15:12:996  INFO 36080 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
16:15:18:184  INFO 22512 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 22512 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
16:15:18:187 DEBUG 22512 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
16:15:18:188  INFO 22512 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
16:15:19:647  INFO 22512 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ecace3d6-5c21-3c65-a621-02d0c307df14
16:15:20:094  INFO 22512 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
16:15:20:105  INFO 22512 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
16:15:20:105  INFO 22512 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
16:15:20:349  INFO 22512 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
16:15:20:350  INFO 22512 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2102 ms
16:15:21:320  INFO 22512 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
16:15:21:595  INFO 22512 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
16:15:21:778  INFO 22512 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
16:15:22:863  INFO 22512 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
16:15:23:756  INFO 22512 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of c2772e61-bbe7-480c-a514-f42cb7c67698
16:15:23:804  INFO 22512 --- [main] org.reflections.Reflections              : Reflections took 26 ms to scan 1 urls, producing 3 keys and 6 values 
16:15:23:859  INFO 22512 --- [main] org.reflections.Reflections              : Reflections took 16 ms to scan 1 urls, producing 4 keys and 9 values 
16:15:23:880  INFO 22512 --- [main] org.reflections.Reflections              : Reflections took 17 ms to scan 1 urls, producing 3 keys and 10 values 
16:15:23:884  WARN 22512 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:15:23:896  INFO 22512 --- [main] org.reflections.Reflections              : Reflections took 12 ms to scan 1 urls, producing 1 keys and 5 values 
16:15:23:911  INFO 22512 --- [main] org.reflections.Reflections              : Reflections took 13 ms to scan 1 urls, producing 1 keys and 7 values 
16:15:23:925  INFO 22512 --- [main] org.reflections.Reflections              : Reflections took 11 ms to scan 1 urls, producing 2 keys and 8 values 
16:15:23:927  WARN 22512 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:15:23:929  INFO 22512 --- [main] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] RpcClient init label, labels = {module=naming, source=sdk}
16:15:23:932  INFO 22512 --- [main] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
16:15:23:932  INFO 22512 --- [main] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
16:15:23:933  INFO 22512 --- [main] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
16:15:23:936  INFO 22512 --- [main] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Try to connect to server on start up, server: {serverIp = '43.133.192.187', server main port = 8848}
16:15:26:267  INFO 22512 --- [main] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Success to connect to server [43.133.192.187:8848] on start up, connectionId = 1704446126274_144.48.139.118_3846
16:15:26:268  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Notify connected event to listeners.
16:15:26:269  INFO 22512 --- [main] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
16:15:26:270  INFO 22512 --- [main] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1123/0x000000080079a040
16:15:26:424  INFO 22512 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
16:15:26:524  INFO 22512 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.0.113:8085 register finished
16:15:26:928  INFO 22512 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1299
16:15:26:931  INFO 22512 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1299
16:15:27:123  INFO 22512 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
16:15:27:127  INFO 22512 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
16:15:27:160  INFO 22512 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
16:15:27:261  INFO 22512 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [43.133.192.187:5672]
16:15:27:656  INFO 22512 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#3ca278bc:0/SimpleConnection@24fc9aa5 [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 3850]
16:15:29:098  INFO 22512 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 12.193 seconds (JVM running for 14.04)
16:16:53:810  INFO 22512 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
16:16:53:811  INFO 22512 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
16:16:53:812  INFO 22512 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
16:16:53:869  INFO 22512 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
16:16:55:601  INFO 22512 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
16:16:55:724 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:16:55:724 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:16:55:724 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:16:56:195 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (470ms)
16:16:56:196 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:16:56:196 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:16:56:196 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:16:56 GMT
16:16:56:196 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:16:56:196 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:16:56:196 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:16:56:197 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9994,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:16:56:197 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:16:56:265 DEBUG 22512 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:16:56:291 DEBUG 22512 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743199893085437953(Long), 27400(Integer), 3(Integer), 1(Long), 1(Integer)
16:16:56:490 DEBUG 22512 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:16:56:494  INFO 22512 --- [nacos-grpc-client-executor-33] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1306
16:16:56:494  INFO 22512 --- [nacos-grpc-client-executor-33] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1306
16:16:56:507 DEBUG 22512 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:16:56:509 DEBUG 22512 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743199893085437953(Long), 100001511821(Long), 2(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:16:56:724 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:16:56:724 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:16:56:724 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:16:57:149 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (424ms)
16:16:57:149 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:16:57:149 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:16:57:149 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:16:57 GMT
16:16:57:149 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:16:57:149 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:16:57:160 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:16:57:160 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:16:57:160 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:16:57:160 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:16:57:160 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:16:57:160 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":2}]
16:16:57:160 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:16:57:395  INFO 22512 --- [nacos-grpc-client-executor-36] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1307
16:16:57:396  INFO 22512 --- [nacos-grpc-client-executor-36] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1307
16:16:57:459 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (299ms)
16:16:57:460 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:16:57:460 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:16:57:460 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:16:57 GMT
16:16:57:460 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:16:57:460 DEBUG 22512 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:17:08:690 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:17:08:692 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199893085437953(Long)
16:17:09:040 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:17:11:298 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743199893085437953 HTTP/1.1
16:17:11:300 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:17:11:964 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (661ms)
16:17:11:965 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:17:11:966 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:17:11:967 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:17:11 GMT
16:17:11:968 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:17:11:969 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:17:31:442  INFO 22512 --- [nacos-grpc-client-executor-42] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1308
16:17:31:446  INFO 22512 --- [nacos-grpc-client-executor-42] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1308
16:17:34:845  INFO 22512 --- [nacos-grpc-client-executor-43] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1309
16:17:34:846  INFO 22512 --- [nacos-grpc-client-executor-43] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1309
16:17:41:672 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.3] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={}, requestId='null'}, retryTimes = 0, errorMessage = java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 1663 milliseconds, 412800 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@6db71395[status=PENDING, info=[GrpcFuture{clientCall={delegate={delegate=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@4ca5e6e1, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@162504c9, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@6db33364}}}}}]]
16:17:40:614 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.2] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={}, requestId='null'}, retryTimes = 0, errorMessage = java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 1020 milliseconds, 554100 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@1922fed4[status=PENDING, info=[GrpcFuture{clientCall={delegate={delegate=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@4ca5e6e1, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@162504c9, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@6db33364}}}}}]]
16:17:41:674  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Server healthy check fail, currentConnection = 1704446126274_144.48.139.118_3846
16:17:41:675  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Try to reconnect to a new server, server is  not appointed, will choose a random server.
16:17:41:678  INFO 22512 --- [nacos-grpc-client-executor-50] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1310
16:17:41:679  INFO 22512 --- [nacos-grpc-client-executor-50] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1310
16:17:41:691  INFO 22512 --- [nacos-grpc-client-executor-51] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1311
16:17:41:692  INFO 22512 --- [nacos-grpc-client-executor-51] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1311
16:17:41:698  INFO 22512 --- [nacos-grpc-client-executor-52] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1312
16:17:41:701  INFO 22512 --- [nacos-grpc-client-executor-52] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1312
16:17:41:778 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:17:41:780 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199893085437953(Long)
16:17:41:888 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:17:43:235 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743199893085437953 HTTP/1.1
16:17:43:239  INFO 22512 --- [nacos-grpc-client-executor-54] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1313
16:17:43:239 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:17:43:240  INFO 22512 --- [nacos-grpc-client-executor-54] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1313
16:17:43:338  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Success to connect a server [43.133.192.187:8848], connectionId = 1704446262169_144.48.139.118_4035
16:17:43:339  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Abandon prev connection, server is 43.133.192.187:8848, connectionId is 1704446126274_144.48.139.118_3846
16:17:43:339  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : Close current connection 1704446126274_144.48.139.118_3846
16:17:43:346  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Notify disconnected event to listeners
16:17:43:348  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Notify connected event to listeners.
16:17:43:350  WARN 22512 --- [nacos-grpc-client-executor-57] c.a.n.c.remote.client.grpc.GrpcClient    : [1704446126274_144.48.139.118_3846]Ignore error event,isRunning:true,isAbandon=true
16:17:43:437  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Server check success, currentServer is 43.133.192.187:8848 
16:17:43:449 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (208ms)
16:17:43:450 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:17:43:451 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:17:43:452 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:17:43 GMT
16:17:43:453 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:17:43:454 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:17:54:802 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.3] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={}, requestId='null'}, retryTimes = 0, errorMessage = java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 7575 milliseconds, 473300 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@5bc1ae55[status=PENDING, info=[GrpcFuture{clientCall={delegate={delegate=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@4ca5e6e1, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@162504c9, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@6db33364}}}}}]]
16:17:54:805 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.0] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={}, requestId='null'}, retryTimes = 0, errorMessage = java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 7579 milliseconds, 885200 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@2461bbac[status=PENDING, info=[GrpcFuture{clientCall={delegate={delegate=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@4ca5e6e1, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@162504c9, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@6db33364}}}}}]]
16:17:55:962 ERROR 22512 --- [com.alibaba.nacos.client.naming.grpc.redo.0] com.alibaba.nacos.common.remote.client   : Send request fail, request = InstanceRequest{headers={app=unknown}, requestId='null'}, retryTimes = 0, errorMessage = Client not connected, current status:UNHEALTHY
16:17:57:196 ERROR 22512 --- [com.alibaba.nacos.client.naming.grpc.redo.0] com.alibaba.nacos.common.remote.client   : Send request fail, request = InstanceRequest{headers={app=unknown}, requestId='null'}, retryTimes = 1, errorMessage = Client not connected, current status:UNHEALTHY
16:17:59:415 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.1] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={app=unknown}, requestId='null'}, retryTimes = 0, errorMessage = Client not connected, current status:UNHEALTHY
16:17:59:416 ERROR 22512 --- [com.alibaba.nacos.client.naming.grpc.redo.0] com.alibaba.nacos.common.remote.client   : Send request fail, request = InstanceRequest{headers={app=unknown}, requestId='null'}, retryTimes = 2, errorMessage = Client not connected, current status:UNHEALTHY
16:17:59:418  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Server healthy check fail, currentConnection = 1704446262169_144.48.139.118_4035
16:17:59:419  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Try to reconnect to a new server, server is  not appointed, will choose a random server.
16:18:01:713 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.1] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={app=unknown}, requestId='null'}, retryTimes = 1, errorMessage = Client not connected, current status:UNHEALTHY
16:18:02:327 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.2] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={app=unknown}, requestId='null'}, retryTimes = 0, errorMessage = Client not connected, current status:UNHEALTHY
16:18:02:430 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:18:02:432 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199893085437953(Long)
16:18:02:435 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.2] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={app=unknown}, requestId='null'}, retryTimes = 1, errorMessage = Client not connected, current status:UNHEALTHY
16:18:02:435 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.3] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={app=unknown}, requestId='null'}, retryTimes = 0, errorMessage = Client not connected, current status:UNHEALTHY
16:18:02:529  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Success to connect a server [43.133.192.187:8848], connectionId = 1704446282723_144.48.139.118_4044
16:18:02:529  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Abandon prev connection, server is 43.133.192.187:8848, connectionId is 1704446262169_144.48.139.118_4035
16:18:02:529  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : Close current connection 1704446262169_144.48.139.118_4035
16:18:02:530  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Notify disconnected event to listeners
16:18:02:530  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Notify connected event to listeners.
16:18:02:531  WARN 22512 --- [nacos-grpc-client-executor-67] c.a.n.c.remote.client.grpc.GrpcClient    : [1704446262169_144.48.139.118_4035]Ignore error event,isRunning:true,isAbandon=true
16:18:02:542 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:18:03:112 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.3] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={app=unknown}, requestId='null'}, retryTimes = 1, errorMessage = Client not connected, current status:UNHEALTHY
16:18:03:112 ERROR 22512 --- [com.alibaba.nacos.client.naming.updater.2] com.alibaba.nacos.common.remote.client   : Send request fail, request = ServiceQueryRequest{headers={app=unknown}, requestId='null'}, retryTimes = 2, errorMessage = Client not connected, current status:UNHEALTHY
16:18:03:817  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Server check success, currentServer is 43.133.192.187:8848 
16:18:03:820 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743199893085437953 HTTP/1.1
16:18:03:822 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:18:03:904  INFO 22512 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Server check success, currentServer is 43.133.192.187:8848 
16:18:04:036 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (213ms)
16:18:04:037 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:18:04:038 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:18:04:039 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:18:04 GMT
16:18:04:040 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:18:04:041 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:18:15:493 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:18:15:496 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743199893085437953(Long)
16:18:15:619 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:18:15:757 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?
16:18:15:801 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer)
16:18:16:018 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 49
16:18:16:054  INFO 22512 --- [nacos-grpc-client-executor-81] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1315
16:18:16:055  INFO 22512 --- [nacos-grpc-client-executor-81] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1315
16:18:16:091 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
16:18:16:093 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1743199893085437953(Long)
16:18:16:199 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
16:18:16:203 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.service.impl.OrderServiceImpl  : 获取需要更新的商品库存信息：[ItemStockDTO(id=100001511821, stock=2)]
16:18:16:212 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> PUT http://item-service/items/stock/return HTTP/1.1
16:18:16:213 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Length: 33
16:18:16:214 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Type: application/json
16:18:16:215 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:18:16:216 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] [{"id":"100001511821","stock":2}]
16:18:16:217 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> END HTTP (33-byte body)
16:18:16:256  INFO 22512 --- [nacos-grpc-client-executor-82] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1317
16:18:16:257  INFO 22512 --- [nacos-grpc-client-executor-82] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1317
16:18:16:259  INFO 22512 --- [nacos-grpc-client-executor-83] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1318
16:18:16:260  INFO 22512 --- [nacos-grpc-client-executor-83] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1318
16:18:16:356  INFO 22512 --- [nacos-grpc-client-executor-84] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Receive server push request, request = NotifySubscriberRequest, requestId = 1319
16:18:16:356  INFO 22512 --- [nacos-grpc-client-executor-84] com.alibaba.nacos.common.remote.client   : [c2772e61-bbe7-480c-a514-f42cb7c67698] Ack server push request, request = NotifySubscriberRequest, requestId = 1319
16:18:16:510 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- HTTP/1.1 200  (291ms)
16:18:16:512 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] connection: keep-alive
16:18:16:513 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] content-length: 0
16:18:16:515 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] date: Fri, 05 Jan 2024 09:18:16 GMT
16:18:16:516 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] keep-alive: timeout=60
16:18:16:517 DEBUG 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- END HTTP (0-byte body)
16:22:43:322  WARN 22512 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:22:43:322  WARN 22512 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:22:43:322  WARN 22512 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:22:43:323  WARN 22512 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:22:43:414  INFO 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:22:43:499  INFO 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:22:44:190  INFO 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:22:44:294  INFO 22512 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:22:44:787  INFO 22512 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:22:44:875  INFO 22512 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:22:45:207  INFO 22512 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:22:45:207  INFO 22512 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@529fee90[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:22:45:207  INFO 22512 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1704446282723_144.48.139.118_4044
16:22:45:209  INFO 22512 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@5a886858[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 154]
16:22:45:397  INFO 22512 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:22:45:397  INFO 22512 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:22:45:399  INFO 22512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
16:22:46:312  INFO 22512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
16:22:53:596  INFO 48968 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 48968 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
16:22:53:599 DEBUG 48968 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
16:22:53:599  INFO 48968 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
16:22:54:734  INFO 48968 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ecace3d6-5c21-3c65-a621-02d0c307df14
16:22:55:104  INFO 48968 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
16:22:55:113  INFO 48968 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
16:22:55:113  INFO 48968 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
16:22:55:333  INFO 48968 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
16:22:55:333  INFO 48968 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1689 ms
16:22:56:267  INFO 48968 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
16:22:56:541  INFO 48968 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
16:22:56:700  INFO 48968 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
16:22:57:688  INFO 48968 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
16:22:58:496  INFO 48968 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of d7f40d35-f4f6-4216-a61d-eadba9a63a7c
16:22:58:539  INFO 48968 --- [main] org.reflections.Reflections              : Reflections took 23 ms to scan 1 urls, producing 3 keys and 6 values 
16:22:58:563  INFO 48968 --- [main] org.reflections.Reflections              : Reflections took 9 ms to scan 1 urls, producing 4 keys and 9 values 
16:22:58:574  INFO 48968 --- [main] org.reflections.Reflections              : Reflections took 7 ms to scan 1 urls, producing 3 keys and 10 values 
16:22:58:577  WARN 48968 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:22:58:586  INFO 48968 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 1 keys and 5 values 
16:22:58:597  INFO 48968 --- [main] org.reflections.Reflections              : Reflections took 9 ms to scan 1 urls, producing 1 keys and 7 values 
16:22:58:607  INFO 48968 --- [main] org.reflections.Reflections              : Reflections took 7 ms to scan 1 urls, producing 2 keys and 8 values 
16:22:58:610  WARN 48968 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:22:58:611  INFO 48968 --- [main] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] RpcClient init label, labels = {module=naming, source=sdk}
16:22:58:613  INFO 48968 --- [main] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
16:22:58:613  INFO 48968 --- [main] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
16:22:58:614  INFO 48968 --- [main] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
16:22:58:616  INFO 48968 --- [main] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Try to connect to server on start up, server: {serverIp = '43.133.192.187', server main port = 8848}
16:23:00:874  INFO 48968 --- [main] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Success to connect to server [43.133.192.187:8848] on start up, connectionId = 1704446580903_144.48.139.118_4270
16:23:00:875  INFO 48968 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Notify connected event to listeners.
16:23:00:876  INFO 48968 --- [main] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
16:23:00:879  INFO 48968 --- [main] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1123/0x000000080079a040
16:23:01:082  INFO 48968 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
16:23:01:253  INFO 48968 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.0.113:8085 register finished
16:23:01:641  INFO 48968 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Receive server push request, request = NotifySubscriberRequest, requestId = 1321
16:23:01:644  INFO 48968 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Ack server push request, request = NotifySubscriberRequest, requestId = 1321
16:23:01:779  INFO 48968 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
16:23:01:782  INFO 48968 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
16:23:01:803  INFO 48968 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
16:23:01:933  INFO 48968 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [43.133.192.187:5672]
16:23:02:367  INFO 48968 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#1255de25:0/SimpleConnection@24888d8b [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 4273]
16:23:02:614 ERROR 48968 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:23:03:818 ERROR 48968 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:23:06:057 ERROR 48968 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:23:10:241 ERROR 48968 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:23:15:433 ERROR 48968 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:23:15:531  INFO 48968 --- [main] o.s.a.r.l.SimpleMessageListenerContainer : Broker not available; cannot force queue declarations during start: java.io.IOException
16:23:16:350  INFO 48968 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 23.829 seconds (JVM running for 25.298)
16:25:10:408  INFO 48968 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
16:25:10:408  INFO 48968 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
16:25:10:409  INFO 48968 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
16:25:10:460  INFO 48968 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
16:25:12:148  INFO 48968 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
16:25:12:264 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:25:12:264 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:25:12:264 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:25:12:721 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (457ms)
16:25:12:721 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:25:12:721 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:25:12:721 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:25:12 GMT
16:25:12:721 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:25:12:721 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:25:12:721 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:25:12:722 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9994,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:25:12:723 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:25:12:774 DEBUG 48968 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:25:12:793 DEBUG 48968 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743201975599321089(Long), 13700(Integer), 3(Integer), 1(Long), 1(Integer)
16:25:12:995 DEBUG 48968 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:25:13:008 DEBUG 48968 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:25:13:010 DEBUG 48968 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743201975599321089(Long), 100001511821(Long), 1(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:25:13:042  INFO 48968 --- [nacos-grpc-client-executor-40] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Receive server push request, request = NotifySubscriberRequest, requestId = 1323
16:25:13:043  INFO 48968 --- [nacos-grpc-client-executor-40] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Ack server push request, request = NotifySubscriberRequest, requestId = 1323
16:25:13:227 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:25:13:227 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:25:13:227 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:25:13:661 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (434ms)
16:25:13:661 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:25:13:661 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:25:13:661 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:25:13 GMT
16:25:13:661 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:25:13:661 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:25:13:670 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:25:13:670 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:25:13:670 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:25:13:670 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:25:13:670 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:25:13:671 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":1}]
16:25:13:671 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:25:13:942  INFO 48968 --- [nacos-grpc-client-executor-43] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Receive server push request, request = NotifySubscriberRequest, requestId = 1324
16:25:13:943  INFO 48968 --- [nacos-grpc-client-executor-43] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Ack server push request, request = NotifySubscriberRequest, requestId = 1324
16:25:13:957 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (286ms)
16:25:13:957 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:25:13:957 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:25:13:957 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:25:13 GMT
16:25:13:957 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:25:13:957 DEBUG 48968 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:25:14:267 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:25:14:268 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743201975599321089(Long)
16:25:14:375 DEBUG 48968 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:25:14:376 DEBUG 48968 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743201975599321089(Long)
16:25:14:380 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:25:14:386 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743201975599321089 HTTP/1.1
16:25:14:386 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:25:14:504 DEBUG 48968 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:25:14:715 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (328ms)
16:25:14:715 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:25:14:715 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:25:14:715 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:25:14 GMT
16:25:14:716 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:25:14:716 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:25:14:813 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:25:14:813 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743201975599321089(Long)
16:25:14:907 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:25:14:908 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743201975599321089 HTTP/1.1
16:25:14:908 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:25:15:016 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (107ms)
16:25:15:016 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:25:15:016 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:25:15:016 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:25:14 GMT
16:25:15:016 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:25:15:016 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:25:15:017 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:25:15:017 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743201983941771267","bizOrderNo":"1743201975599321089","payOrderNo":"1743201983941771266","bizUserId":"1","payChannelCode":"balance","amount":13700,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:25:15","qrCodeUrl":null,"createTime":"2024-01-05T17:25:15","updateTime":"2024-01-05T17:25:15"}
16:25:15:018 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:25:15:044  INFO 48968 --- [nacos-grpc-client-executor-47] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Receive server push request, request = NotifySubscriberRequest, requestId = 1325
16:25:15:044  INFO 48968 --- [nacos-grpc-client-executor-47] com.alibaba.nacos.common.remote.client   : [d7f40d35-f4f6-4216-a61d-eadba9a63a7c] Ack server push request, request = NotifySubscriberRequest, requestId = 1325
16:25:15:112 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:25:15:112 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743201975599321089(Long)
16:25:15:228 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:25:15:228 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743201975599321089 HTTP/1.1
16:25:15:228 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:25:15:336 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (107ms)
16:25:15:336 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:25:15:336 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:25:15:336 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:25:14 GMT
16:25:15:336 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:25:15:336 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:25:15:336 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:25:15:336 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743201983941771267","bizOrderNo":"1743201975599321089","payOrderNo":"1743201983941771266","bizUserId":"1","payChannelCode":"balance","amount":13700,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:25:15","qrCodeUrl":null,"createTime":"2024-01-05T17:25:15","updateTime":"2024-01-05T17:25:15"}
16:25:15:336 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:25:15:337 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:25:15:338 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743201975599321089(Long)
16:25:15:432 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:25:15:459 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?
16:25:15:467 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer)
16:25:15:656 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 50
16:25:15:664 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
16:25:15:664 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1743201975599321089(Long)
16:25:15:759 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
16:25:15:763 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.service.impl.OrderServiceImpl  : 获取需要更新的商品库存信息：[ItemStockDTO(id=100001511821, stock=1)]
16:25:15:764 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> PUT http://item-service/items/stock/return HTTP/1.1
16:25:15:765 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Length: 33
16:25:15:765 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Type: application/json
16:25:15:765 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:25:15:765 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] [{"id":"100001511821","stock":1}]
16:25:15:765 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> END HTTP (33-byte body)
16:25:16:043 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- HTTP/1.1 200  (277ms)
16:25:16:043 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] connection: keep-alive
16:25:16:043 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] content-length: 0
16:25:16:043 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] date: Fri, 05 Jan 2024 09:25:16 GMT
16:25:16:043 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] keep-alive: timeout=60
16:25:16:043 DEBUG 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- END HTTP (0-byte body)
16:26:33:062  WARN 48968 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:26:33:062  WARN 48968 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:26:33:062  WARN 48968 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:26:33:063  WARN 48968 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:26:33:158  INFO 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:26:33:247  INFO 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:26:33:345  INFO 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:26:33:842  INFO 48968 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:26:34:308  INFO 48968 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:26:34:408  INFO 48968 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:26:34:741  INFO 48968 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:26:34:741  INFO 48968 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@6cb288c4[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:26:34:742  INFO 48968 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1704446580903_144.48.139.118_4270
16:26:34:747  INFO 48968 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@1054d9c6[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 71]
16:26:34:940  INFO 48968 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:26:34:940  INFO 48968 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:26:34:943  INFO 48968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
16:26:35:915  INFO 48968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
16:26:42:926  INFO 88316 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 88316 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
16:26:42:929 DEBUG 88316 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
16:26:42:929  INFO 88316 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
16:26:44:303  INFO 88316 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ecace3d6-5c21-3c65-a621-02d0c307df14
16:26:44:761  INFO 88316 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
16:26:44:775  INFO 88316 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
16:26:44:775  INFO 88316 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
16:26:45:036  INFO 88316 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
16:26:45:037  INFO 88316 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2054 ms
16:26:45:977  INFO 88316 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
16:26:46:250  INFO 88316 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
16:26:46:432  INFO 88316 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
16:26:47:511  INFO 88316 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
16:26:48:397  INFO 88316 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of b8dd788b-cba4-44ba-b92b-32fa394e154f
16:26:48:444  INFO 88316 --- [main] org.reflections.Reflections              : Reflections took 25 ms to scan 1 urls, producing 3 keys and 6 values 
16:26:48:504  INFO 88316 --- [main] org.reflections.Reflections              : Reflections took 22 ms to scan 1 urls, producing 4 keys and 9 values 
16:26:48:520  INFO 88316 --- [main] org.reflections.Reflections              : Reflections took 12 ms to scan 1 urls, producing 3 keys and 10 values 
16:26:48:524  WARN 88316 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:26:48:534  INFO 88316 --- [main] org.reflections.Reflections              : Reflections took 10 ms to scan 1 urls, producing 1 keys and 5 values 
16:26:48:549  INFO 88316 --- [main] org.reflections.Reflections              : Reflections took 12 ms to scan 1 urls, producing 1 keys and 7 values 
16:26:48:564  INFO 88316 --- [main] org.reflections.Reflections              : Reflections took 11 ms to scan 1 urls, producing 2 keys and 8 values 
16:26:48:567  WARN 88316 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:26:48:569  INFO 88316 --- [main] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] RpcClient init label, labels = {module=naming, source=sdk}
16:26:48:572  INFO 88316 --- [main] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
16:26:48:572  INFO 88316 --- [main] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
16:26:48:573  INFO 88316 --- [main] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
16:26:48:576  INFO 88316 --- [main] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Try to connect to server on start up, server: {serverIp = '43.133.192.187', server main port = 8848}
16:26:50:905  INFO 88316 --- [main] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Success to connect to server [43.133.192.187:8848] on start up, connectionId = 1704446810907_144.48.139.118_4502
16:26:50:907  INFO 88316 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Notify connected event to listeners.
16:26:50:909  INFO 88316 --- [main] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
16:26:50:910  INFO 88316 --- [main] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1123/0x000000080079a040
16:26:51:081  INFO 88316 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
16:26:51:192  INFO 88316 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.0.113:8085 register finished
16:26:51:550  INFO 88316 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Receive server push request, request = NotifySubscriberRequest, requestId = 1328
16:26:51:553  INFO 88316 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Ack server push request, request = NotifySubscriberRequest, requestId = 1328
16:26:51:734  INFO 88316 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
16:26:51:738  INFO 88316 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
16:26:51:772  INFO 88316 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
16:26:51:873  INFO 88316 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [43.133.192.187:5672]
16:26:52:304  INFO 88316 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#3ca278bc:0/SimpleConnection@24ce5d4c [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 4506]
16:26:52:547 ERROR 88316 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:26:53:756 ERROR 88316 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:26:55:960 ERROR 88316 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:27:00:167 ERROR 88316 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:27:05:371 ERROR 88316 --- [AMQP Connection 43.133.192.187:5672] o.s.a.r.c.CachingConnectionFactory       : Shutdown Signal: channel error; protocol method: #method<channel.close>(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg 'type' for exchange 'trade.delay.topic' in vhost '/hmall': received ''x-delayed-message'' but current is 'topic', class-id=40, method-id=10)
16:27:05:468  INFO 88316 --- [main] o.s.a.r.l.SimpleMessageListenerContainer : Broker not available; cannot force queue declarations during start: java.io.IOException
16:27:06:389  INFO 88316 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 24.751 seconds (JVM running for 26.402)
16:27:19:296  INFO 88316 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
16:27:19:296  INFO 88316 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
16:27:19:298  INFO 88316 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
16:27:19:368  INFO 88316 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
16:27:20:934  INFO 88316 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
16:27:20:943 DEBUG 88316 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:27:20:967 DEBUG 88316 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1742089533901172738(Long)
16:27:21:080 DEBUG 88316 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:27:28:619 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:27:28:619 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:27:28:619 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:27:29:107 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (487ms)
16:27:29:108 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:27:29:108 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:27:29:108 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:27:29 GMT
16:27:29:108 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:27:29:108 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:27:29:108 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:27:29:109 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9994,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:27:29:109 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:27:29:153 DEBUG 88316 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:27:29:154 DEBUG 88316 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743202547643670529(Long), 13700(Integer), 3(Integer), 1(Long), 1(Integer)
16:27:29:326 DEBUG 88316 --- [http-nio-8085-exec-2] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:27:29:340 DEBUG 88316 --- [http-nio-8085-exec-2] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:27:29:341 DEBUG 88316 --- [http-nio-8085-exec-2] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743202547643670529(Long), 100001511821(Long), 1(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:27:29:367  INFO 88316 --- [nacos-grpc-client-executor-19] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Receive server push request, request = NotifySubscriberRequest, requestId = 1330
16:27:29:368  INFO 88316 --- [nacos-grpc-client-executor-19] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Ack server push request, request = NotifySubscriberRequest, requestId = 1330
16:27:29:518 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:27:29:518 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:27:29:518 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:27:29:928 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (408ms)
16:27:29:928 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:27:29:928 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:27:29:928 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:27:29 GMT
16:27:29:928 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:27:29:928 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:27:29:933 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:27:29:933 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:27:29:933 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:27:29:933 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:27:29:934 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:27:29:934 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":1}]
16:27:29:934 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:27:30:167  INFO 88316 --- [nacos-grpc-client-executor-22] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Receive server push request, request = NotifySubscriberRequest, requestId = 1331
16:27:30:172  INFO 88316 --- [nacos-grpc-client-executor-22] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Ack server push request, request = NotifySubscriberRequest, requestId = 1331
16:27:30:223 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (289ms)
16:27:30:223 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:27:30:223 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:27:30:224 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:27:30 GMT
16:27:30:224 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:27:30:224 DEBUG 88316 --- [http-nio-8085-exec-2] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:27:34:005 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:27:34:010 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743202547643670529(Long)
16:27:34:098 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:27:34:099 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743202547643670529 HTTP/1.1
16:27:34:099 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:27:34:435 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (336ms)
16:27:34:436 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:27:34:436 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:27:34:436 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:27:34 GMT
16:27:34:436 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:27:34:436 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:27:40:491  INFO 88316 --- [nacos-grpc-client-executor-25] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Receive server push request, request = NotifySubscriberRequest, requestId = 1332
16:27:40:492  INFO 88316 --- [nacos-grpc-client-executor-25] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Ack server push request, request = NotifySubscriberRequest, requestId = 1332
16:27:40:571 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:27:40:571 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743202547643670529(Long)
16:27:40:660 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:27:40:661 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743202547643670529 HTTP/1.1
16:27:40:661 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:27:40:781  INFO 88316 --- [nacos-grpc-client-executor-28] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Receive server push request, request = NotifySubscriberRequest, requestId = 1333
16:27:40:781  INFO 88316 --- [nacos-grpc-client-executor-28] com.alibaba.nacos.common.remote.client   : [b8dd788b-cba4-44ba-b92b-32fa394e154f] Ack server push request, request = NotifySubscriberRequest, requestId = 1333
16:27:40:862 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (200ms)
16:27:40:862 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:27:40:862 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:27:40:862 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:27:40 GMT
16:27:40:863 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:27:40:863 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:27:55:993 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:27:55:994 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743202547643670529(Long)
16:27:56:159 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:27:56:159 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743202547643670529 HTTP/1.1
16:27:56:160 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:27:56:484 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (323ms)
16:27:56:484 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:27:56:484 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:27:56:484 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:27:56 GMT
16:27:56:484 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:27:56:484 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:27:56:485 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:27:56:485 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743202547643670529(Long)
16:27:56:624 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:27:56:654 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?
16:27:56:659 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer)
16:27:56:952 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 51
16:27:56:962 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
16:27:56:962 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1743202547643670529(Long)
16:27:57:086 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
16:27:57:087 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.service.impl.OrderServiceImpl  : 获取需要更新的商品库存信息：[ItemStockDTO(id=100001511821, stock=1)]
16:27:57:089 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> PUT http://item-service/items/stock/return HTTP/1.1
16:27:57:089 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Length: 33
16:27:57:089 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Type: application/json
16:27:57:089 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:27:57:090 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] [{"id":"100001511821","stock":1}]
16:27:57:090 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> END HTTP (33-byte body)
16:27:57:412 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- HTTP/1.1 200  (323ms)
16:27:57:413 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] connection: keep-alive
16:27:57:413 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] content-length: 0
16:27:57:413 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] date: Fri, 05 Jan 2024 09:27:57 GMT
16:27:57:413 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] keep-alive: timeout=60
16:27:57:413 DEBUG 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- END HTTP (0-byte body)
16:31:26:135  WARN 88316 --- [pool-2-thread-13] o.s.a.r.listener.BlockingQueueConsumer   : Cancel received for amq.ctag-iVpkqMzsA36iYJvXzgV52A (trade.order.delay.queue); Consumer@4587f0f9: tags=[[amq.ctag-iVpkqMzsA36iYJvXzgV52A]], channel=Cached Rabbit Channel: AMQChannel(amqp://hmall@43.133.192.187:5672//hmall,1), conn: Proxy@1d988297 Shared Rabbit Connection: SimpleConnection@24ce5d4c [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 4506], acknowledgeMode=AUTO local queue size=0
16:31:26:414  WARN 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: org.springframework.amqp.rabbit.support.ConsumerCancelledException
16:31:26:415  INFO 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Restarting Consumer@4587f0f9: tags=[[]], channel=Cached Rabbit Channel: AMQChannel(amqp://hmall@43.133.192.187:5672//hmall,1), conn: Proxy@1d988297 Shared Rabbit Connection: SimpleConnection@24ce5d4c [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 4506], acknowledgeMode=AUTO local queue size=0
16:31:31:541  WARN 88316 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:31:31:541  WARN 88316 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:31:31:541  WARN 88316 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:31:31:542  WARN 88316 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:31:31:646  INFO 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:31:31:743  INFO 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:31:31:752  INFO 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:31:31:863  INFO 88316 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:31:32:434  INFO 88316 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:31:32:539  INFO 88316 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:31:32:878  INFO 88316 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:31:32:878  INFO 88316 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1779a6e1[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:31:32:878  INFO 88316 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1704446810907_144.48.139.118_4502
16:31:32:886  INFO 88316 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@351dcd61[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 79]
16:31:33:003  INFO 88316 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:31:33:003  INFO 88316 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:31:33:006  INFO 88316 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
16:31:33:914  INFO 88316 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
16:31:38:846  INFO 63976 --- [main] com.hmall.trade.TradeApplication         : Starting TradeApplication using Java 11.0.12 on DESKTOP-RLHUNOD with PID 63976 (F:\notes\RabbitMQ\codes\hmall\trade-service\target\classes started by jinlin in F:\notes\RabbitMQ\codes\hmall)
16:31:38:849 DEBUG 63976 --- [main] com.hmall.trade.TradeApplication         : Running with Spring Boot v2.7.12, Spring v5.3.27
16:31:38:849  INFO 63976 --- [main] com.hmall.trade.TradeApplication         : The following 1 profile is active: "local"
16:31:41:084  INFO 63976 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=ecace3d6-5c21-3c65-a621-02d0c307df14
16:31:41:541  INFO 63976 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8085 (http)
16:31:41:555  INFO 63976 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
16:31:41:556  INFO 63976 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
16:31:41:805  INFO 63976 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
16:31:41:806  INFO 63976 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2903 ms
16:31:42:789  INFO 63976 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'item-service' URL not provided. Will try picking an instance via load-balancing.
16:31:43:105  INFO 63976 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'cart-service' URL not provided. Will try picking an instance via load-balancing.
16:31:43:297  INFO 63976 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'pay-service' URL not provided. Will try picking an instance via load-balancing.
16:31:44:381  INFO 63976 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
16:31:45:357  INFO 63976 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 6abeb402-0eed-4c89-bb40-3c90651b68bb
16:31:45:415  INFO 63976 --- [main] org.reflections.Reflections              : Reflections took 27 ms to scan 1 urls, producing 3 keys and 6 values 
16:31:45:484  INFO 63976 --- [main] org.reflections.Reflections              : Reflections took 25 ms to scan 1 urls, producing 4 keys and 9 values 
16:31:45:503  INFO 63976 --- [main] org.reflections.Reflections              : Reflections took 13 ms to scan 1 urls, producing 3 keys and 10 values 
16:31:45:507  WARN 63976 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:31:45:522  INFO 63976 --- [main] org.reflections.Reflections              : Reflections took 14 ms to scan 1 urls, producing 1 keys and 5 values 
16:31:45:537  INFO 63976 --- [main] org.reflections.Reflections              : Reflections took 12 ms to scan 1 urls, producing 1 keys and 7 values 
16:31:45:553  INFO 63976 --- [main] org.reflections.Reflections              : Reflections took 13 ms to scan 1 urls, producing 2 keys and 8 values 
16:31:45:556  WARN 63976 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
16:31:45:557  INFO 63976 --- [main] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] RpcClient init label, labels = {module=naming, source=sdk}
16:31:45:560  INFO 63976 --- [main] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
16:31:45:561  INFO 63976 --- [main] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
16:31:45:562  INFO 63976 --- [main] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
16:31:45:566  INFO 63976 --- [main] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Try to connect to server on start up, server: {serverIp = '43.133.192.187', server main port = 8848}
16:31:48:072  INFO 63976 --- [main] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Success to connect to server [43.133.192.187:8848] on start up, connectionId = 1704447108090_144.48.139.118_4771
16:31:48:073  INFO 63976 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Notify connected event to listeners.
16:31:48:075  INFO 63976 --- [main] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
16:31:48:076  INFO 63976 --- [main] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1123/0x000000080079a040
16:31:48:237  INFO 63976 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8085 (http) with context path ''
16:31:48:340  INFO 63976 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP trade-service 192.168.0.113:8085 register finished
16:31:48:712  INFO 63976 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Receive server push request, request = NotifySubscriberRequest, requestId = 1335
16:31:48:715  INFO 63976 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Ack server push request, request = NotifySubscriberRequest, requestId = 1335
16:31:48:934  INFO 63976 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
16:31:48:939  INFO 63976 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
16:31:48:972  INFO 63976 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
16:31:49:078  INFO 63976 --- [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [43.133.192.187:5672]
16:31:49:480  INFO 63976 --- [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#283e1759:0/SimpleConnection@7ba623d1 [delegate=amqp://hmall@43.133.192.187:5672//hmall, localPort= 4774]
16:31:50:967  INFO 63976 --- [main] com.hmall.trade.TradeApplication         : Started TradeApplication in 13.302 seconds (JVM running for 15.041)
16:32:14:896  INFO 63976 --- [http-nio-8085-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
16:32:14:896  INFO 63976 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
16:32:14:898  INFO 63976 --- [http-nio-8085-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
16:32:14:969  INFO 63976 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
16:32:16:754  INFO 63976 --- [http-nio-8085-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
16:32:16:763 DEBUG 63976 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:32:16:786 DEBUG 63976 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743201975599321089(Long)
16:32:16:914 DEBUG 63976 --- [http-nio-8085-exec-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:32:27:353 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:32:27:354 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:32:27:354 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:32:27:832 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (477ms)
16:32:27:832 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:32:27:832 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:32:27:832 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:32:27 GMT
16:32:27:832 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:32:27:833 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:32:27:833 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:32:27:834 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9994,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:32:27:834 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:32:27:878 DEBUG 63976 --- [http-nio-8085-exec-3] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:32:27:878 DEBUG 63976 --- [http-nio-8085-exec-3] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743203800582950914(Long), 27400(Integer), 3(Integer), 1(Long), 1(Integer)
16:32:28:076 DEBUG 63976 --- [http-nio-8085-exec-3] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:32:28:088 DEBUG 63976 --- [http-nio-8085-exec-3] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:32:28:089 DEBUG 63976 --- [http-nio-8085-exec-3] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743203800582950914(Long), 100001511821(Long), 2(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:32:28:130  INFO 63976 --- [nacos-grpc-client-executor-21] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Receive server push request, request = NotifySubscriberRequest, requestId = 1337
16:32:28:130  INFO 63976 --- [nacos-grpc-client-executor-21] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Ack server push request, request = NotifySubscriberRequest, requestId = 1337
16:32:28:291 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:32:28:291 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:32:28:291 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:32:28:682 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (390ms)
16:32:28:682 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:32:28:682 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:32:28:682 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:32:28 GMT
16:32:28:682 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:32:28:682 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:32:28:688 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:32:28:688 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:32:28:688 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:32:28:688 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:32:28:688 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:32:28:688 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":2}]
16:32:28:688 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:32:28:933  INFO 63976 --- [nacos-grpc-client-executor-24] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Receive server push request, request = NotifySubscriberRequest, requestId = 1338
16:32:28:938  INFO 63976 --- [nacos-grpc-client-executor-24] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Ack server push request, request = NotifySubscriberRequest, requestId = 1338
16:32:28:973 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (285ms)
16:32:28:974 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:32:28:974 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:32:28:974 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:32:28 GMT
16:32:28:974 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:32:28:974 DEBUG 63976 --- [http-nio-8085-exec-3] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:32:31:780 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:32:31:781 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743203800582950914(Long)
16:32:31:881 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:32:31:882 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743203800582950914 HTTP/1.1
16:32:31:882 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:32:31:931 DEBUG 63976 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:32:31:931 DEBUG 63976 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743203800582950914(Long)
16:32:32:016 DEBUG 63976 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:32:32:211 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (328ms)
16:32:32:211 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:32:32:211 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:32:32:211 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:32:32 GMT
16:32:32:211 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:32:32:211 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:32:32:533  INFO 63976 --- [nacos-grpc-client-executor-27] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Receive server push request, request = NotifySubscriberRequest, requestId = 1339
16:32:32:534  INFO 63976 --- [nacos-grpc-client-executor-27] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Ack server push request, request = NotifySubscriberRequest, requestId = 1339
16:32:46:062 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:32:46:062 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743203800582950914(Long)
16:32:46:166 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:32:46:167 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743203800582950914 HTTP/1.1
16:32:46:167 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:32:46:364 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (198ms)
16:32:46:365 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:32:46:365 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:32:46:365 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:32:46 GMT
16:32:46:365 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:32:46:365 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:32:46:365 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:32:46:365 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743203818710695939","bizOrderNo":"1743203800582950914","payOrderNo":"1743203818710695938","bizUserId":"1","payChannelCode":"balance","amount":27400,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:32:32","qrCodeUrl":null,"createTime":"2024-01-05T17:32:32","updateTime":"2024-01-05T17:32:32"}
16:32:46:365 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:33:11:007 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:33:11:008 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743203800582950914(Long)
16:33:11:108 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:33:11:108 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743203800582950914 HTTP/1.1
16:33:11:108 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:33:11:308 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (199ms)
16:33:11:308 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:33:11:308 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:33:11:308 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:33:11 GMT
16:33:11:308 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:33:11:308 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:33:11:308 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:33:11:308 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743203818710695939","bizOrderNo":"1743203800582950914","payOrderNo":"1743203818710695938","bizUserId":"1","payChannelCode":"balance","amount":27400,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:32:32","qrCodeUrl":null,"createTime":"2024-01-05T17:32:32","updateTime":"2024-01-05T17:32:32"}
16:33:11:309 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:33:11:310 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:33:11:310 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743203800582950914(Long)
16:33:11:411 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:33:11:437 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?
16:33:11:441 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer)
16:33:11:642 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 52
16:33:11:652 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
16:33:11:653 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1743203800582950914(Long)
16:33:11:753 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
16:33:11:754 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.service.impl.OrderServiceImpl  : 获取需要更新的商品库存信息：[ItemStockDTO(id=100001511821, stock=2)]
16:33:11:756 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> PUT http://item-service/items/stock/return HTTP/1.1
16:33:11:756 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Length: 33
16:33:11:756 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Type: application/json
16:33:11:756 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:33:11:756 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] [{"id":"100001511821","stock":2}]
16:33:11:756 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> END HTTP (33-byte body)
16:33:12:043 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- HTTP/1.1 200  (286ms)
16:33:12:043 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] connection: keep-alive
16:33:12:043 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] content-length: 0
16:33:12:043 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] date: Fri, 05 Jan 2024 09:33:12 GMT
16:33:12:043 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] keep-alive: timeout=60
16:33:12:043 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- END HTTP (0-byte body)
16:35:12:134 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:35:12:135 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:35:12:135 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:35:12:326 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (191ms)
16:35:12:326 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:35:12:326 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:35:12:326 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:35:12 GMT
16:35:12:326 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:35:12:326 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:35:12:326 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:35:12:327 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9994,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:35:12:327 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:35:12:329 DEBUG 63976 --- [http-nio-8085-exec-5] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:35:12:329 DEBUG 63976 --- [http-nio-8085-exec-5] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743204490306883586(Long), 27400(Integer), 3(Integer), 1(Long), 1(Integer)
16:35:12:526 DEBUG 63976 --- [http-nio-8085-exec-5] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:35:12:527 DEBUG 63976 --- [http-nio-8085-exec-5] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:35:12:528 DEBUG 63976 --- [http-nio-8085-exec-5] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743204490306883586(Long), 100001511821(Long), 2(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:35:12:730 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:35:12:730 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:35:12:730 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:35:13:004 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (273ms)
16:35:13:004 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:35:13:004 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:35:13:004 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:35:13 GMT
16:35:13:004 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:35:13:004 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:35:13:005 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:35:13:005 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:35:13:005 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:35:13:005 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:35:13:005 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:35:13:005 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":2}]
16:35:13:005 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:35:13:284 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (278ms)
16:35:13:284 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:35:13:284 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:35:13:284 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:35:12 GMT
16:35:13:284 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:35:13:284 DEBUG 63976 --- [http-nio-8085-exec-5] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:35:13:457 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:35:13:458 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743204490306883586(Long)
16:35:13:543 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:35:13:544 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743204490306883586 HTTP/1.1
16:35:13:544 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:35:13:584 DEBUG 63976 --- [http-nio-8085-exec-6] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:35:13:585 DEBUG 63976 --- [http-nio-8085-exec-6] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743204490306883586(Long)
16:35:13:688 DEBUG 63976 --- [http-nio-8085-exec-6] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:35:13:747 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (202ms)
16:35:13:747 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:35:13:747 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:35:13:747 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:35:13 GMT
16:35:13:747 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:35:13:747 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:35:23:923 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:35:23:923 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743204490306883586(Long)
16:35:24:006 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:35:24:007 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743204490306883586 HTTP/1.1
16:35:24:007 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:35:24:207 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (198ms)
16:35:24:207 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:35:24:207 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:35:24:207 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:35:24 GMT
16:35:24:207 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:35:24:207 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:35:24:207 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:35:24:207 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743204496828989443","bizOrderNo":"1743204490306883586","payOrderNo":"1743204496828989442","bizUserId":"1","payChannelCode":"balance","amount":27400,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:35:14","qrCodeUrl":null,"createTime":"2024-01-05T17:35:14","updateTime":"2024-01-05T17:35:14"}
16:35:24:207 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:35:44:381 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:35:44:382 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743204490306883586(Long)
16:35:44:470 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:35:44:471 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743204490306883586 HTTP/1.1
16:35:44:471 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:35:44:664 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (194ms)
16:35:44:665 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:35:44:665 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-type: application/json
16:35:44:665 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:35:44 GMT
16:35:44:665 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:35:44:665 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] transfer-encoding: chunked
16:35:44:665 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] 
16:35:44:665 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] {"id":"1743204496828989443","bizOrderNo":"1743204490306883586","payOrderNo":"1743204496828989442","bizUserId":"1","payChannelCode":"balance","amount":27400,"payType":5,"status":1,"expandJson":"","resultCode":"","resultMsg":"","paySuccessTime":null,"payOverTime":"2024-01-05T18:35:14","qrCodeUrl":null,"createTime":"2024-01-05T17:35:14","updateTime":"2024-01-05T17:35:14"}
16:35:44:665 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (371-byte body)
16:35:44:666 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:35:44:666 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743204490306883586(Long)
16:35:44:750 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:35:44:752 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?
16:35:44:752 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 5(Integer)
16:35:44:924 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 53
16:35:44:925 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==>  Preparing: SELECT id,order_id,item_id,num,name,spec,price,image,create_time,update_time FROM order_detail WHERE (order_id = ?)
16:35:44:925 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : ==> Parameters: 1743204490306883586(Long)
16:35:45:010 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.t.m.OrderDetailMapper.selectList     : <==      Total: 1
16:35:45:010 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.service.impl.OrderServiceImpl  : 获取需要更新的商品库存信息：[ItemStockDTO(id=100001511821, stock=2)]
16:35:45:011 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> PUT http://item-service/items/stock/return HTTP/1.1
16:35:45:011 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Length: 33
16:35:45:011 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] Content-Type: application/json
16:35:45:011 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] 
16:35:45:011 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] [{"id":"100001511821","stock":2}]
16:35:45:011 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] ---> END HTTP (33-byte body)
16:35:45:303 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- HTTP/1.1 200  (292ms)
16:35:45:304 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] connection: keep-alive
16:35:45:304 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] content-length: 0
16:35:45:304 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] date: Fri, 05 Jan 2024 09:35:45 GMT
16:35:45:304 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] keep-alive: timeout=60
16:35:45:304 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.ItemClient          : [ItemClient#returnStock] <--- END HTTP (0-byte body)
16:36:11:159 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:36:11:159 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:36:11:159 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:36:11:345 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (185ms)
16:36:11:345 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:36:11:345 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:36:11:345 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:36:11 GMT
16:36:11:345 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:36:11:345 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:36:11:345 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:36:11:346 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9994,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:36:11:346 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:36:11:347 DEBUG 63976 --- [http-nio-8085-exec-7] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:36:11:348 DEBUG 63976 --- [http-nio-8085-exec-7] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743204737884065794(Long), 27400(Integer), 3(Integer), 1(Long), 1(Integer)
16:36:11:551 DEBUG 63976 --- [http-nio-8085-exec-7] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:36:11:552 DEBUG 63976 --- [http-nio-8085-exec-7] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:36:11:553 DEBUG 63976 --- [http-nio-8085-exec-7] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743204737884065794(Long), 100001511821(Long), 2(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:36:11:770 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:36:11:770 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:36:11:770 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:36:12:051 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (281ms)
16:36:12:051 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:36:12:051 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:36:12:051 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:36:12 GMT
16:36:12:051 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:36:12:051 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:36:12:052 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:36:12:052 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:36:12:052 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:36:12:052 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:36:12:052 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:36:12:052 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":2}]
16:36:12:052 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:36:12:330 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (277ms)
16:36:12:330 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:36:12:330 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:36:12:330 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:36:11 GMT
16:36:12:330 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:36:12:330 DEBUG 63976 --- [http-nio-8085-exec-7] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:36:12:502 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:36:12:502 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743204737884065794(Long)
16:36:12:585 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:36:12:587 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743204737884065794 HTTP/1.1
16:36:12:587 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:36:12:598 DEBUG 63976 --- [http-nio-8085-exec-8] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:36:12:599 DEBUG 63976 --- [http-nio-8085-exec-8] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743204737884065794(Long)
16:36:12:700 DEBUG 63976 --- [http-nio-8085-exec-8] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:36:12:781 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (193ms)
16:36:12:781 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:36:12:781 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:36:12:781 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:36:12 GMT
16:36:12:781 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:36:12:781 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:36:16:841 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,pay_time=? WHERE (id = ? AND status = ?)
16:36:16:846 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 2(Integer), 2024-01-05T16:36:16.740144400(LocalDateTime), 1743204737884065794(Long), 1(Integer)
16:36:17:006 DEBUG 63976 --- [http-nio-8085-exec-9] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:36:17:008 DEBUG 63976 --- [http-nio-8085-exec-9] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743204737884065794(Long)
16:36:17:045 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
16:36:17:094 DEBUG 63976 --- [http-nio-8085-exec-9] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:36:22:956 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:36:22:956 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743204737884065794(Long)
16:36:23:041 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:39:49:940 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> GET http://item-service/items?ids=100001511821 HTTP/1.1
16:39:49:940 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] user-info: 1
16:39:49:940 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---> END HTTP (0-byte body)
16:39:50:129 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- HTTP/1.1 200  (187ms)
16:39:50:129 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive
16:39:50:129 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json
16:39:50:129 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 05 Jan 2024 09:39:50 GMT
16:39:50:129 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60
16:39:50:129 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked
16:39:50:129 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] 
16:39:50:129 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [{"id":"100001511821","name":"HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30","price":13700,"stock":9992,"image":"https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp","category":"牛仔裤","brand":"HMDIME","spec":"{\"颜色\": \"蓝色\", \"尺码\": \"30\"}","sold":0,"commentCount":0,"isAD":false,"status":1}]
16:39:50:129 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <--- END HTTP (459-byte body)
16:39:50:132 DEBUG 63976 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==>  Preparing: INSERT INTO `order` ( id, total_fee, payment_type, user_id, status ) VALUES ( ?, ?, ?, ?, ? )
16:39:50:132 DEBUG 63976 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : ==> Parameters: 1743205655534866433(Long), 13700(Integer), 3(Integer), 1(Long), 1(Integer)
16:39:50:334 DEBUG 63976 --- [http-nio-8085-exec-1] c.hmall.trade.mapper.OrderMapper.insert  : <==    Updates: 1
16:39:50:335 DEBUG 63976 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==>  Preparing: INSERT INTO order_detail ( order_id, item_id, num, name, spec, price, image ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
16:39:50:336 DEBUG 63976 --- [http-nio-8085-exec-1] c.h.t.mapper.OrderDetailMapper.insert    : ==> Parameters: 1743205655534866433(Long), 100001511821(Long), 1(Integer), HMDIME 牛仔背带裤女2018秋冬新品 韩版学院风潮流百搭弹力修身补丁学生吊带长裤女 AXNZ369 深蓝 30(String), {"颜色": "蓝色", "尺码": "30"}(String), 13700(Integer), https://m.360buyimg.com/mobilecms/s720x720_jfs/t30892/263/313055374/557791/c98e9abc/5bef811aN036f7c3b.jpg!q70.jpg.webp(String)
16:39:50:537 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> DELETE http://cart-service/carts?ids=100001511821 HTTP/1.1
16:39:50:537 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] user-info: 1
16:39:50:537 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] ---> END HTTP (0-byte body)
16:39:50:812 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- HTTP/1.1 200  (273ms)
16:39:50:812 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] connection: keep-alive
16:39:50:812 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] content-length: 0
16:39:50:812 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] date: Fri, 05 Jan 2024 09:39:50 GMT
16:39:50:812 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] keep-alive: timeout=60
16:39:50:812 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.CartClient          : [CartClient#deleteCartItemByIds] <--- END HTTP (0-byte body)
16:39:50:813 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> PUT http://item-service/items/stock/deduct HTTP/1.1
16:39:50:813 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Length: 35
16:39:50:813 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] Content-Type: application/json
16:39:50:813 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] user-info: 1
16:39:50:813 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] 
16:39:50:813 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] [{"itemId":"100001511821","num":1}]
16:39:50:813 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] ---> END HTTP (35-byte body)
16:39:51:094 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- HTTP/1.1 200  (281ms)
16:39:51:094 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] connection: keep-alive
16:39:51:094 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] content-length: 0
16:39:51:094 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] date: Fri, 05 Jan 2024 09:39:50 GMT
16:39:51:094 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] keep-alive: timeout=60
16:39:51:094 DEBUG 63976 --- [http-nio-8085-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#deductStock] <--- END HTTP (0-byte body)
16:39:51:266 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:39:51:267 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743205655534866433(Long)
16:39:51:354 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:39:51:354 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> GET http://pay-service/pay-orders/biz/1743205655534866433 HTTP/1.1
16:39:51:355 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] ---> END HTTP (0-byte body)
16:39:51:382 DEBUG 63976 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:39:51:383 DEBUG 63976 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743205655534866433(Long)
16:39:51:486 DEBUG 63976 --- [http-nio-8085-exec-3] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:39:51:555 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- HTTP/1.1 200  (201ms)
16:39:51:556 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] connection: keep-alive
16:39:51:556 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] content-length: 0
16:39:51:556 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] date: Fri, 05 Jan 2024 09:39:51 GMT
16:39:51:556 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] keep-alive: timeout=60
16:39:51:556 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] com.hmall.api.client.PayClient           : [PayClient#queryPayOrderByBizOrderNo] <--- END HTTP (0-byte body)
16:39:59:889 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] c.hmall.trade.mapper.OrderMapper.update  : ==>  Preparing: UPDATE `order` SET status=?,pay_time=? WHERE (id = ? AND status = ?)
16:39:59:889 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] c.hmall.trade.mapper.OrderMapper.update  : ==> Parameters: 2(Integer), 2024-01-05T16:39:59.787711700(LocalDateTime), 1743205655534866433(Long), 1(Integer)
16:40:00:037 DEBUG 63976 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:40:00:037 DEBUG 63976 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743205655534866433(Long)
16:40:00:094 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] c.hmall.trade.mapper.OrderMapper.update  : <==    Updates: 1
16:40:00:121 DEBUG 63976 --- [http-nio-8085-exec-2] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:40:01:729 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==>  Preparing: SELECT id,total_fee,payment_type,user_id,status,create_time,pay_time,consign_time,end_time,close_time,comment_time,update_time FROM `order` WHERE id=?
16:40:01:730 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : ==> Parameters: 1743205655534866433(Long)
16:40:01:820 DEBUG 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] c.h.trade.mapper.OrderMapper.selectById  : <==      Total: 1
16:50:07:773  WARN 63976 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
16:50:07:773  WARN 63976 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
16:50:07:773  WARN 63976 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
16:50:07:774  WARN 63976 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
16:50:07:869  INFO 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:50:07:956  INFO 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Waiting for workers to finish.
16:50:08:098  INFO 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:50:08:402  INFO 63976 --- [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Successfully waited for workers to finish.
16:50:08:975  INFO 63976 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
16:50:09:074  INFO 63976 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
16:50:09:178  INFO 63976 --- [nacos-grpc-client-executor-261] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Receive server push request, request = NotifySubscriberRequest, requestId = 1342
16:50:09:181  INFO 63976 --- [nacos-grpc-client-executor-261] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Ack server push request, request = NotifySubscriberRequest, requestId = 1342
16:50:09:280  INFO 63976 --- [nacos-grpc-client-executor-262] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Receive server push request, request = NotifySubscriberRequest, requestId = 1343
16:50:09:282  INFO 63976 --- [nacos-grpc-client-executor-262] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Ack server push request, request = NotifySubscriberRequest, requestId = 1343
16:50:09:377  INFO 63976 --- [nacos-grpc-client-executor-263] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Receive server push request, request = NotifySubscriberRequest, requestId = 1345
16:50:09:378  INFO 63976 --- [nacos-grpc-client-executor-263] com.alibaba.nacos.common.remote.client   : [6abeb402-0eed-4c89-bb40-3c90651b68bb] Ack server push request, request = NotifySubscriberRequest, requestId = 1345
16:50:09:399  INFO 63976 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
16:50:09:399  INFO 63976 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@52c7925d[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
16:50:09:399  INFO 63976 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1704447108090_144.48.139.118_4771
16:50:09:406  INFO 63976 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@24adca93[Running, pool size = 7, active threads = 0, queued tasks = 0, completed tasks = 264]
16:50:09:601  INFO 63976 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:50:09:601  INFO 63976 --- [SpringApplicationShutdownHook] o.s.a.r.l.SimpleMessageListenerContainer : Shutdown ignored - container is already stopped
16:50:09:604  INFO 63976 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
16:50:10:535  INFO 63976 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
